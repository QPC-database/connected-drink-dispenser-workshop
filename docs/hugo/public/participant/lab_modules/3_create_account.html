<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.59.1" />
    <meta name="description" content="">


    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>3. Create Account/Resources :: Connected Drink Dispenser Workshop</title>

    
    <link href="../../css/nucleus.css" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css" rel="stylesheet">
    <link href="../../css/hybrid.css" rel="stylesheet">
    <link href="../../css/featherlight.min.css" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="../../css/auto-complete.css" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css" rel="stylesheet">
    <link href="../../css/theme.css" rel="stylesheet">
    <link href="../../css/hugo-theme.css" rel="stylesheet">
    
      <link href="../../css/theme-mine.css" rel="stylesheet">
    

    <script src="../../js/jquery-3.3.1.min.js"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <link rel="stylesheet" href="../../css/adoc.css">
<link rel="stylesheet" href="../../css/tags.css">
<link rel="stylesheet" href="../../css/jquery-ui.min.css">
  </head>
  <body class="" data-url="/participant/lab_modules/3_create_account.html">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://cdd.example.com/docs/docs">
    <img src="../../images/cdd_logo.png" alt="Connected Drink Dispenser Workshop" width="50%">
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js"></script>
<script type="text/javascript" src="../../js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/cdd.example.com\/docs";
    
</script>
<script type="text/javascript" src="../../js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/participant.html" title="Workshop Participant" class="dd-item 
        parent
        
        
        ">
      <a href="../../participant.html">
          <i class="fas fa-user-graduate"></i>&nbsp;Workshop Participant
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules.html" title="Lab Modules" class="dd-item 
        parent
        
        
        ">
      <a href="../../participant/lab_modules.html">
          <i class="fas fa-user-graduate"></i>&nbsp;Lab Modules
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/1_overview.html" title="1. Architecture Overview" class="dd-item 
        
        
        
        ">
      <a href="../../participant/lab_modules/1_overview.html">
          1. Architecture Overview
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/2_laptop_setup.html" title="2. Laptop Setup" class="dd-item 
        
        
        
        ">
      <a href="../../participant/lab_modules/2_laptop_setup.html">
          2. Laptop Setup
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/3_create_account.html" title="3. Create Account/Resources" class="dd-item 
        parent
        active
        
        ">
      <a href="../../participant/lab_modules/3_create_account.html">
          3. Create Account/Resources
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/4_esp_setup.html" title="4. MCU Setup &amp; Test" class="dd-item 
        
        
        
        ">
      <a href="../../participant/lab_modules/4_esp_setup.html">
          4. MCU Setup &amp; Test
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/5_cloud9_setup.html" title="5. Cloud9 Dev Environment" class="dd-item 
        
        
        
        ">
      <a href="../../participant/lab_modules/5_cloud9_setup.html">
          5. Cloud9 Dev Environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/6_flash_and_test.html" title="6. Develop, Flash, &amp; Test MCU" class="dd-item 
        
        
        
        ">
      <a href="../../participant/lab_modules/6_flash_and_test.html">
          6. Develop, Flash, &amp; Test MCU
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/7_investigate_cloud.html" title="7. Review Cloud Architecture" class="dd-item 
        
        
        
        ">
      <a href="../../participant/lab_modules/7_investigate_cloud.html">
          7. Review Cloud Architecture
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/8_build_dispenser.html" title="8. Build Dispenser" class="dd-item 
        
        
        
        ">
      <a href="../../participant/lab_modules/8_build_dispenser.html">
          8. Build Dispenser
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/9_final_test.html" title="9. Dispense a Drink!" class="dd-item 
        
        
        
        ">
      <a href="../../participant/lab_modules/9_final_test.html">
          9. Dispense a Drink!
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/presenter.html" title="Setting Up the Workshop" class="dd-item 
        
        
        
        ">
      <a href="../../presenter.html">
          <i class="fas fa-chalkboard-teacher"></i>&nbsp;Setting Up the Workshop
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/presenter/prerequisites.html" title="Prerequisites" class="dd-item 
        
        
        
        ">
      <a href="../../presenter/prerequisites.html">
          <i class="fas fa-greater-than"></i>&nbsp;Prerequisites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/presenter/deploy.html" title="Deploy Stack" class="dd-item 
        
        
        
        ">
      <a href="../../presenter/deploy.html">
          <i class="fas fa-greater-than"></i>&nbsp;Deploy Stack
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/presenter/repository.html" title="Repository Layout" class="dd-item 
        
        
        
        ">
      <a href="../../presenter/repository.html">
          <i class="fas fa-greater-than"></i>&nbsp;Repository Layout
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/presenter/design_notes.html" title="Design Notes" class="dd-item 
        
        
        
        ">
      <a href="../../presenter/design_notes.html">
          <i class="fas fa-greater-than"></i>&nbsp;Design Notes
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/presenter/design_notes/message_flows.html" title="Message Flows" class="dd-item 
        
        
        
        ">
      <a href="../../presenter/design_notes/message_flows.html">
          <i class="fas fa-greater-than"></i>&nbsp;Message Flows
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/search?q=topic%3Aiot&#43;org%3Aaws-samples&#43;fork%3Atrue"><i class='fas fa-bookmark'></i> AWS Samples on GitHub</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='../../'></a> > <a href='../../participant.html'>Workshop Participant</a> > <a href='../../participant/lab_modules.html'>Lab Modules</a> > 3. Create Account/Resources
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">

    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              3. Create Account/Resources
            </h1>
          

        




	<section class="doc-section level-1"><h2 id="_objectives">Objectives</h2><p>This lab module will walk though creation of user and account resources, and how to access your unique resources. By the end of the module you will have:</p>
<div class="ulist"><ul><li>Created and verified a user account</li><li>Understood what takes place during account creation</li><li>Know where to navigate in order to download and access your specific resources such as certificate and private key, and access other user details.</li><li>Been introduced to UML <a href="https://en.wikipedia.org/wiki/Sequence_diagram">sequence diagrams</a> used to illustrate operations.</li></ul></div></section>
<section class="doc-section level-1"><h2 id="_resource_creation_process">Resource Creation Process</h2><p>When you first go through the user creation process, there are no resources created in advance. Once you log in for the first time, the API call that returns your resources will notice there are none and will go about creating them. At a high level, the process looks like this:</p>
<img src="../../images/lab3_res_creation.png" alt="Visual flow of resource creation" width="70%"/>
<div class="olist arabic"><ol class="arabic"><li>User John Doe registers and verifies new account <code>jdoe</code></li><li>The user is created in Cognito User Pool and a valid JSON web token is returned</li><li>As this is the first login, the <code>/getResources</code> method is called which invokes a Lambda function</li><li>The function creates all of the unique resources for John on a per-service basis. As a result the following resource get created:<ol class="loweralpha" type="a"><li>An AWS IoT thing (the dispenser) and an associated certificate</li><li>An IAM user account with an automatically generated password</li><li>A Cloud9 development environment</li></ol></li><li>All of the created resources are stored in a DynamoDB table that can only be accessed by the Lambda function.</li></ol></div>
<p>Finally, the <code>/getResources</code> returns John&#8217;s specific details to be displayed in the webapp. This same sequence of events can also be presented using a sequence diagram. Each actor or participant is a column, and from top to bottom are the activities. See if you can associate the diagram above from this sequence diagram figure:</p>
<figure class="image-block"><img src="../../Turn%20on%20the%20LED.svg" alt="Turn on the LED" width="1502" height="612">
<figcaption>Figure 1. Create User Resources Process</figcaption></figure>
<p>Sequence diagrams are a consistent way to depict the flow of steps, especially for complex or multi-step operations. Depending upon what is being described, we are going to use a textual description or a sequence diagram in the lab modules.</p>
<p>Now that you have an understanding of what is taking place behind the scenes, it&#8217;s time to create your account!</p></section>
<section class="doc-section level-1"><h2 id="_steps_to_complete">Steps to Complete</h2><p>Follow each step in order and use the <em>Click to open for detailed step-by-step instructions</em> if required to create your account and access the resources.</p>
<section class="doc-section level-2"><h3 id="_1_register_for_an_account">1. Register for an Account</h3><p>Open the URL provided in the presentation, and click on the <span class="underline blue">create a new account</span> link, or from the SIGN IN link, click on the <span class="blue underline">Sign up</span> link at the bottom of the Sign in page. For your account, enter <em>Username</em>, <em>Password</em>, and <em>Phone number</em> for your mobile phone to receive a validation code. Once you receive the verification code, enter it to complete the account sign up process. <strong>The mobile phone number is mandatory to validate your account. If you do not receive a code within a couple minutes, or do not have access to SMS, please ask the workshop assistants to manually validate.</strong></p>

<div class="notices warning" ><p>The phone number must be in the "+county code" format. For instance, a US number would be "+18005551212" and for the UK "+447624&#8230;&#8203;", etc. If you have questions about the format, or are unable to receive an SMS message, please let one of the lab helpers know and they can complete the process for you.</p>
</div>


<div class="expand">
    <div class="expand-label" style="cursor: pointer;text-decoration: underline" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-circle-down' : 'fas fa-chevron-circle-right';});});">
        <i style="font-size:large;" class="fas fa-chevron-circle-right"></i>
        <span>
        
    	
    	Click to open for detailed step-by-step instructions
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="olist arabic"><ol class="arabic"><li>Navigate to the URL provided during the workshop overview. <code><a class="bare" href="https://cdd.example.com">https://cdd.example.com</a></code> will be used in these instructions, replace with what was provided.</li><li><p>From the <em>Welcome to the Connected Drink Dispenser Workshop!</em> section, click on the <span class="blue underline">create a new account</span> link.</p><img src="../../images/lab3_main_page.png" alt="Main web site page - unathenticated" width="50%"/></li><li><p>Choose a <em>username</em> (an e-mail address works and will not be used to send any emails), <em>password</em>, and enter your mobile number for SMS verification code.</p><img src="../../images/lab3_create_account_page.png" alt="Create Account Page" width="50%"/></li><li>The page will refresh to the <em>Confirm sign up</em> page to enter the <em>Confirmation code</em>. Check your phone for the 6-digit code, enter it, and click <em>CONFIRM</em>. If successful you will directed to the Sign in page.</li></ol></div>

    </div>
</div></section>
<section class="doc-section level-2"><h3 id="_2_initial_log_in">2. Initial Log In</h3><p>With the account created and on the <em>Sign in</em> page, log in with your <em>username</em>/<em>password</em>. Initially you will see a <em>Loading Resource</em> page, and during this first log in, it will pause while the resources are created in the background.</p>
<p>There are various resources that are created, and this step normally takes around 30 second to upwards of 1-2 minutes. The reason for this is that different AWS services have different API call limits. With larger groups, you are simultaneously accessing the same resources, and API call may be throttled. If there are no changes after a minute or so, click on the log out icon (upper right in the menu bar), and log in again.</p>
<p>Once the resource creation is complete, the dispenser details page will load. Click the <em>MY DETAILS</em> button to open the resources section. Click on the <em>CERTIFICATE FILE</em> and <em>PRIVATE KEY FILE</em>, and save the files to your  <code>cdd</code> directory on your laptop. If the files are automatically saved in the Download folder, move them to the <code>cdd</code> directory. Click the <em>MY DETAILS</em> button to hide the details.</p>

<div class="notices note" ><p>The <em>AMAZON ROOT CA1 FILE</em> is not needed for this workshop, as the trusted certificate authorities are included in the Amazon FreeRTOS source code that you will be compiling. It is available here for use in other applications which you may wish use to emulate the dispenser (AWS IoT Thing).</p>
</div>


<div class="expand">
    <div class="expand-label" style="cursor: pointer;text-decoration: underline" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-circle-down' : 'fas fa-chevron-circle-right';});});">
        <i style="font-size:large;" class="fas fa-chevron-circle-right"></i>
        <span>
        
    	
    	Click to open for detailed step-by-step instructions
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="olist arabic"><ol class="arabic"><li>From the <em>Sign in page</em>, enter your your <em>username</em> and <em>password</em> and click <em>LOG IN</em>.</li><li><p>The <em>Loading Resource</em> page will appear, followed after a few seconds a notice about resource creation. <strong>Do not refresh or click other links at this point.</strong> Resource creation can take approximately 30 seconds up to 1-2 minutes to complete. If there are no changes after a minute or so, click on the log out icon (upper right in the menu bar), and log in again.</p><img src="../../images/lab3_load_resources.png" alt="Loading Resources Page"/></li><li><p>Once the resources have loaded, toggle the <em>MY DETAILS</em> button to open the resources section. Click on the <em>CERTIFICATE FILE</em>, <em>PRIVATE KEY FILE</em>, and <em>AMAZON ROOT CA1 FILE</em> links and save the files to your <code>cdd</code> directory on your laptop. Click the <em>MY DETAILS</em> button to toggle closed.</p><video width="640" controls>
 <source src="../../images/lab3_download_files.mp4" type="video/mp4"/>
 Your browser does not support the video tag.
</video></li><li>After downloading the files, note that your username appears in the upper right corner indicating you are logged in, and your unique dispenser number and credits are noted in the upper left.</li></ol></div>

    </div>
</div></section></section>
<section class="doc-section level-1"><h2 id="_checkpoints">Checkpoints</h2><p>Please ensure the following checkpoints are validated before moving on to the next module.</p>
<div class="olist arabic"><ol class="arabic"><li>You have successfully created a user account and saved the user username and password for future use.</li><li>You have downloaded the certificate file (e.g., <code>34ea05fe7b-certificate.pem.crt</code>), private key (e.g., <code>34ea05fe7b-private.pem.key</code>) and <em>optionally</em> the root certificate CA (<code>AmazonRootCA1.pem</code>). This validates that all resources have been created in the cloud based on your username and assigned dispenser Id.</li></ol></div></section>
<section class="doc-section level-1"><h2 id="_outcomes">Outcomes</h2><p>We provided a detailed explanation of what happens during account and resource creation and showed a process for just in time registration of resources. In our case, it was the creation of the user account and resources, but a similar pattern can also be used to generate AWS IoT things, certificates, and policies <em>just</em> as a new device needs them, and not in advance.</p>
<p>If you are interested in how the resource creation process takes place, look at the code for the <code>ApiGetResourcesFunction</code> Lambda function when you are logged into the AWS Console.</p></section>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../../participant/lab_modules/2_laptop_setup.html" title="2. Laptop Setup"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../participant/lab_modules/4_esp_setup.html" title="4. MCU Setup &amp; Test" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js"></script>
    <script src="../../js/perfect-scrollbar.min.js"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js"></script>
    <script src="../../js/jquery.sticky.js"></script>
    <script src="../../js/featherlight.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/modernizr.custom-3.6.0.js"></script>
    <script src="../../js/learn.js"></script>
    <script src="../../js/hugo-learn.js"></script>

    <link href="../../mermaid/mermaid.css" rel="stylesheet" />
    <script src="../../mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <div style="float: right;margin-right: 10px;margin-top: 10px;font-size: smaller;">Copyright © 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div>

<script src="../../js/fix-adoc.js"></script>
<script src="../../js/jquery-ui.min.js"></script>

  </body>
</html>
