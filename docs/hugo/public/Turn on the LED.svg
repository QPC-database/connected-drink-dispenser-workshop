<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="646px" preserveAspectRatio="none" style="width:806px;height:646px;" version="1.1" viewBox="0 0 806 646" width="806px" zoomAndPan="magnify"><defs><filter height="300%" id="f124i6j93pz0lk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster iot--><rect fill="#FFFFFF" filter="url(#f124i6j93pz0lk)" height="203" style="stroke: #000000; stroke-width: 1.5;" width="523" x="14" y="140"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="242" y="154.9951">IoT Core</text><!--entity cognito--><rect fill="#FFFFFF" filter="url(#f124i6j93pz0lk)" height="149.1875" style="stroke: #FF9900; stroke-width: 1.5;" width="194" x="564" y="186"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="622.5" y="210.8516">testuser</text><image height="64" width="64" x="629" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAADMElEQVR4Xu2Zv4rcMBDG701TpUyVNk3qK1KnSB9IH8gDHHmBywMkEQiWQLjAsWA4nA99eBhrVpa0u7a8IPFxeG1Zmp9mRn98d+7N25vWnb11W+oArdUBWqsDtFYHaK0O0FqlAIf7D38+flpb6MV2vaw8gH/3fvj1e9yqoC/0aM1IKQ9wfPyBdvH339dva4t9gcGakVIGAINR2+KForfLYykDgIY4/PbRgoBdK3n3+eF7YwB/Vs5IF7sAoE3AKBQqvzw90Q97AbCvYJZkplrjYP2uAdAI7KNbWPBUxz0BcPHz1etVANA6urSuT0kDwFBaD8vghL+fv0QVXAAYQ8jhJq+vDHBGiZISkaObJQN4+DPyz3h1AHq8UFHU0VYdMC7kwxh8wp8MIbyIasewll0fwD5Kyc9zQCeoiM1GAG69HLgEgCMq0ULRSuQDf+56FpJpAAyMMeQD74hbNgJA03bCoSQY3BxAzGXRyYrrrT3AYDhZtIsEwE97ChgHs45hiuQ1rRynNNgIgAGQkrxCAL0g6Ke6ZVaAxfTM6gCFIoAe4JR8WONewiopXawIgJCNzh/shtcyzwiATtOUIu+50AsYsi+KKgDocV3QmZgrQyh3otV3JVUAHMy5nuMUnccFoDAM6ITyIY9UAVAoAZCJ/6SJaBku0l7FNe7UkqwIEBXdiF4cZDGRO1Wxd30AF2YSTixaYhbnGaR4NN5erXrL05fWKgALoolD+uOPn5a/Qj9kABgPJRNiiTgc2db8dAYqmQYyAE7Fq978lEsbweCRLZAVJzRsqlGnMJDyAC4wcEjOKHqB03seK55yxrCnEM/bapGKACi2Wyt5fTmdxHrxzzHsHXULJ1UBcKEIIFHBPSmvrfVuAsimwdYA9ICf0pSbKGu92yGAn4f1Yf6xyGb2csKItgNw5nwsDNZ6uiWVMFqbAtCsQX2s9+EzjK05zD8cLWhTAKf+XWIfVdURbQ3gp51CtMZRh+mcOaT3GpG2BnCBgWNMQzGZYi56Dp88ePOYOEafVAMACvEtFkvBnZK412oGQGGkuf/h6cdWyKoxwOXqAK3VAVqrA7RWB2itDtBaNw/wH5k/xyOceCd9AAAAAElFTkSuQmCC" y="214.625"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="91" x="615.5" y="289.7637">[Cognito User]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="663" y="305.5889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="174" x="574" y="321.8857">custom:dispenserId: 123</text><!--entity db--><rect fill="#FFFFFF" filter="url(#f124i6j93pz0lk)" height="149.1875" style="stroke: #FF9900; stroke-width: 1.5;" width="156" x="564" y="486"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="574" y="510.8516">DispenserTable</text><image height="64" width="64" x="610" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAABtElEQVR4Xu2avUvEQBDF7x+3tLnSxs4q1XU2lilsLWwDYnGgeCBYrFgIQhwyYYPzNtlFLpOdZR8PjktmN/Pj9ut2s+uNa8cf7vMnxb4Y3tL3BEBfLi6fU9w9fVF8e/+Bt/TNDGUBNIcTJYe+vXvnAAGAkQqmJGcBHh4dNyyh17fvIIBviJqiJGcBKDMZPojyzgdAPL0CqKsCQBXK+g9AVqPQEgCN95Qi2pcRADSiYfDa9pNSACDqLvOZOOpMAfqhm6aYg6kk3tI3JzMC2NUI0MKaKWj+1WhQwlv6ngDM94FyANqhkaD9ClYAUFvC4LXtn+6CANywhDrrS4kKcE5VAKhCWRUAqlDWEsD1zUtzOKHpehAAIxXskwkARC0AtvUfAMIi76+OC6YAmnr7YWspGryqOdsJwLSKADDfhEroxHzJ/DBqfiKrABqqAFCFsioAVKGsCICDbQxnaFslagGwrQsC4JxSzGWy29w1rRGgg+ODoDnY5XbAYb4PlANg/pjVd20hMwfdcwCdoaWEDB9UAc6pCgBVKGsJwPxLf4311y6jFgDbuiAAZkgxB6fHr2rOxPz/gV+YFRj8+GvFVAAAAABJRU5ErkJggg==" y="514.625"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="115" x="584.5" y="589.7637">[DynamoDB Table]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="644" y="605.5889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="583.5" y="621.8857">dispenserId: 123</text><!--entity thing--><rect fill="#FFFFFF" filter="url(#f124i6j93pz0lk)" height="149.1875" style="stroke: #FF9900; stroke-width: 1.5;" width="86" x="57" y="186"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="83.5" y="210.8516">123</text><image height="64" width="64" x="68" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAC8ElEQVR4Xu1asW7jMAzth98fND/gHzC6G7gbMxVdCnQpUNx0wA258VB46KgSJkowJE1RkWLXiB8egoC0rfcsSrIS36WN404GtoabNDB+vCODQR2JBIO4xED/1B1+/YBPikDbEAEe335S8PT/LwbhCwXhAAxyufqCcewGJuwG5AXjuAED0Dy0Orw8ELvjPYrgQYxAiiIoC5WVnguERrnzOWQMPP95xKuvRRAgNZ3DM0A1cJhuz8Kkpv1+8AxQvf7+9ypz1wc0iq3zcaXhGcDqhJshE0sB+wFkyATDbuCauDEDsLLAhM2JY2h1A4dpJeHki+CZATxa0DQAB/NFp57mszSfTDlnDcR7YPhaPltxsOqkrAc0UKVvoFMLUCmzBswUocoApMyujwNOd1Q6KUKtAREHQbDyF7lyVDopwpmB8WtvisRhoFUmywAOa6wHbNV/hiE4KjGFRc/Jj7lwFhIGqBLEiZGuyBrQ5JdtY4DuPXyBB2CawfrAHqWlAXju48TzswbIORdBlsQMqKnPJZAAIcw2oKEL3UzRtoFvPkp3Qo4BM0VoYIB6gBcMryKf6xtITO41xoCZIpwZgGLgRB0RA1edhUCGEMaPaTMLJWsdEOrHmTUua0DTHsSVBhCmSt9bMwOpooQcZKsrayBaQhqOSiclwAc0jG/qChrfWQNmilBlAHX4FHITs4Sd4Kh0UoRaA0GaaxwWg6PSSRGqHiUO4R7gIujcYA90wUeJJrOQBq8iPgZIcdaA5qIG6mchTdtAmhrjxJtnqowbSNPszMfMULgO9MENjYaj0knNYbTWuBQwYKYItQa0oCKM627qMVtJqivZRqkBLHo9A3augVY0VZI9IYx3+4Wz0Lj1nxaXQVkPaAzzY2AZlI0Bjd1ALW7ewHHrf7Oetv5Hdyr/ga05q141QJzUyx50dYrwRUMHe+tlDx7UFxxavexhApX1W3ndRkO3txuQF4xjNzBhYwZGa2/qBHUkEgziEgPfCruBtfEJ2LdbK6cL2EAAAAAASUVORK5CYII=" y="214.625"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="66" x="67" y="289.7637">[IoT Thing]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="102" y="305.5889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="102" y="321.8857"/><!--entity cert--><rect fill="#FFFFFF" filter="url(#f124i6j93pz0lk)" height="149.1875" style="stroke: #FF9900; stroke-width: 1.5;" width="133" x="178.5" y="186"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="211" y="210.8516">0ff1ab3</text><image height="64" width="64" x="213" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAEWklEQVR4Xu1asY4UMQy9D+cP2B+YH1jRrwTlVIjmJBokdBUSxVIiNAVlsMY3Tx47cZxkTgzonqLTbibj+NmO4+T2If3jeNAdR2D5/ev+8/vTjy9o9JU69bgjcBgBUvHx28frp2ma314+vMk2ekQDaBgN1u/34gACrLdV12/MRMtqxxAB0kDZm77ePr+bv77nsEGjr9RJj+z4QRqdBEgnaXXSg/QLBgYNo8GSCYkKvmvRQ4BspkzYsUDpFeXAPlc0EyDjYUoKiQ7VJeh1EgKBJFyPqKGNgJysz2BZSJfSFPqxiwYCsD35vTtkSyCBCKcmP0QJwEgvoT1Dcoi7N0SARMPFL6Q9o2OiEAFkTErn+tnRoCl4LppUP8uhTgDB07q8uoFUEQmkCgFKcxyX9HcwY8bRNGmFAMwfMcaBiM9bIQBL6AfbVsrlJzf6HC8oqnCmlvAIICfYxCz3Y9vGd+gkpvAt4hHIiiDNVBlH6nJDFud+f+IqHPNJeARYUeVEaE/9NqveRZWqliB9VuP54CZ7FNgifj4tEiDprIfMnvAJCXWCBHkQcyOxoAf7rmNgyHHmKhKAB5EH0AOfkNySaLn3qagjtWTVwByycpCLHEcVCWBHxMtySchQoQ82luDAYOM8pvZKmMzKB4oELHvEAOTKZo0ka2+8qAwPM8lh8IaNAosiAdibxcGi1I9Ht/X4i89KAr0yr+dgHqY6ZWRyD7ghg8lJIVahh4DKTtlk1QcZlmmQAELIEuDYYDshKrLJjgfEG5zAGmPSnhCyi5ilk/Y2cLNzwIetDdF4H1nE9mWZlZVydgGkjXBrk6KsES2KBGz8QRzPcV8X31yo3uQpgj4Hm7K0WodZFAmk3E6ORWYDRgJUB1d2JD14BGTMcA/i6lLODLD9xY3dKhAC2fgEPAIwpLS3XMHTeqP4tF2DPu5veX0vVQFD+FbwCKTCqYIk+gt0Gr6yTYWpLSoEsIyUGRZzswnV50Jl1gT4uRSoQIUAArFkift6dc4JJJuO+gDTVG1RIZCEE6rGOApNM9YJLNtZ5OJuKEcBiW4K3KmkCIG0z+sRod2QxvKTDxAikMKHyREs4uAWCR5GlEDan3QP5yC193cuhQYCaX8lceB6kIV0tix30EYgCQ6X4b2WIUuPVu1TB4G0L/SvuRN9EPSiNEc87iV6CCRTTVzX/1oHFwbv4lL1KXdHFkQngbQdz6EEmKC8A59l++nEvJ2nZRssPfoJMJiGLYq4Tettj+3nR4OqM0YJzOsZn60ur0ZKbVpvr9gb/KKW2IhRAqyxzNwo71hF1tJWe7yrTIUaMY7jCQTxSuAZrwT+YwLL+kuUW+H/ZWcnIE/MU+6Mf14CbHhWXTblipMSUDXS43phiK+TqHnOSEAa/ip+Bnff/8BODj4LgWlf82QLBFn5YfxZCGQNb6FccToCWcNbKFfox40YJcAWlaszAqz1jjOkwiiBZf0BQXarqqL7RYlRAn8dfwD3JxnZoifbmwAAAABJRU5ErkJggg==" y="214.625"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="113" x="188.5" y="289.7637">[X.509 Certificate]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="247" y="305.5889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="215.5" y="321.8857">CN=123</text><!--entity policy--><rect fill="#FFFFFF" filter="url(#f124i6j93pz0lk)" height="149.1875" style="stroke: #FF9900; stroke-width: 1.5;" width="182" x="347" y="186"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="362" y="210.8516">DispenserAccess</text><image height="64" width="64" x="406" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAADsUlEQVR4Xu2ZPW7cMBCFffDcILqALhCkXyAutwrSLJAmQOAqgItNGQQuUjLPet7nEf/FlZZYQA/EQqYocr7hDEnJD+7O9eBX3Jt2gN7aAXrrHeD488t4/LhR+fRtPP36asZdTW8Ah++fh8cPW5ctGF4BXv795QBwFUi2KOrfH/9qzQC28BBFhh0gohzA+c9ziIQatPcqi+oAAOsxnleJlYp2LGXoAIBrVqqe1rMATy1r1AHAzRmwkDdb73oBuDkDLWiw3nUEgKzvEUX+7Tp1A7Bxn2pToz4Ash4DW5IGhg4Ain7Fvc2Hp98/1LJGHQBQyX3AZi0ZYI1qKtUBgPXhmrPU91QfgBW1AySVA7jvELr7JLaL5nbLKCcZvaFzbDX4xXU47RklAdyqGxkex5HETh0MxZ+c5LCM08ttDUkOwK13lLCC6Sm7wwLsPEYBwK10mKMwEGNJBX9iUJiIWwonTpdtlhm3AGDjfjDHigadL694sukl+1qH9pYWSNH2OQBr/ZUvNNb6lClRFR9MAljrWd/8SqkVeWhagvG43IcL724SQOi2su2lXpHQYL0kBi9MkgBupc8qSMqU8xbJTqM1IAewiuS5RVEXlaLazuS2ADA6HBKjcAsbp6/WxeXISu7QI+0ANaMq7+l+/HoLvErl0JoEnWUaAejCIgOjdpyOQN4+wJOFreHo6BPYtI/XNvZkqqa0BUCrSj4v1S33Ufkej1tyZTkNENJx+oeL6uVy9kOnuAYAWV+cASUAD5iy3m83Z8gU+kthydGXAejhovVuDmBHZSZ426p3arAbn+p5SzUFALTzjlDW+po10QJwVM67Ysnr/zyd5NgzOWkiflEfZn8OQJSqUfpXWu/SAHKE9dd5Orplik33MoDGZqWsH5bsR7Zb9cBctElJhfZFC0hqkziaWN6oRdGsw7TssIdo8tjgzBT2wz61ACYBXMCw1HpnQtHNrTxdXmJscEfZPCk0lD85AGcYGqx3JnPYs3jCMtallnpQ4wIA7xYdk5JmfLyE7MlsVSqMjfmjEclOu4HOABhnaxVOmiLHLppPl+8ouKgxnVKw2XB4BXDZyW0umk+5vC0OKTnCO7+8AbipRZj41xQB2MWgJtBDKZfGINHfATaV3UmimZaRfB+dwxsBuLkdh7qvbuf5+0NovbslgAu+MjHRwyT29ochu8jeFMAFTmXhGfMwHRPGhYvsrQEoz8GpUhNpfQAo+PU0veDT8SycjWhoRdUTYBXtAL21A/TW3QP8B9San+0G8AdpAAAAAElFTkSuQmCC" y="214.625"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="404.5" y="289.7637">[IoT Policy]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="440" y="305.5889"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="357" y="321.8857">Limited Shadow Access</text><!--link thing to cert--><path d="M148.2414,260.5 C148.3022,260.5 148.3333,260.5 148.3333,260.5 C148.3333,260.5 160.8692,260.5 173.1725,260.5 " fill="none" id="thing-cert" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="178.3939,260.5,169.3939,256.5,173.3939,260.5,169.3939,264.5,178.3939,260.5" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="143.1608,260.5,152.1608,264.5,148.1608,260.5,152.1608,256.5,143.1608,260.5" style="stroke: #666666; stroke-width: 1.0;"/><!--link cert to policy--><path d="M316.8456,260.5 C323.0721,260.5 332.3763,260.5 341.6625,260.5 " fill="none" id="cert-policy" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="346.7999,260.5,337.7999,256.5,341.7999,260.5,337.7999,264.5,346.7999,260.5" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="311.7767,260.5,320.7767,264.5,316.7767,260.5,320.7767,256.5,311.7767,260.5" style="stroke: #666666; stroke-width: 1.0;"/><!--link iot to cognito--><path d="M40.0095,139.9997 C40.0159,139.9995 40.0254,139.9991 40.0381,139.9987 C40.0634,139.9979 40.1013,139.9966 40.1515,139.9949 C40.2519,139.9916 40.4018,139.9865 40.5995,139.9799 C40.995,139.9667 41.5818,139.947 42.3472,139.9214 C43.8779,139.8701 46.123,139.7949 48.9805,139.6992 C54.6953,139.5078 62.8594,139.2344 72.6563,138.9063 C92.25,138.25 118.375,137.375 144.5,136.5 C196.75,134.75 249,133 249,133 C249,133 337,133 337,133 C337,133 545,140 545,140 C545,140 563.4301,159.1451 585.5979,182.1728 " fill="none" id="iot-cognito" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="589.1855,185.8996,585.8256,176.6416,585.7179,182.2974,580.0621,182.1898,589.1855,185.8996" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="40.0095,139.9997,49.1384,143.6962,45.0067,139.8323,48.8706,135.7007,40.0095,139.9997" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="82" x="250" y="115.1387">thingName =</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="73" x="256.5" y="129.1074">dispenserId</text><!--link iot to db--><path d="M40,343 C40,343 394.0128,470.9033 559.0879,530.5442 " fill="none" id="iot-db" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="563.9162,532.2887,556.8109,525.4685,559.2137,530.5897,554.0925,532.9925,563.9162,532.2887" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="40,343,47.1053,349.8202,44.7025,344.699,49.8237,342.2962,40,343" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="136" x="262" y="408.1387">thingName = partiton</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21" x="321.5" y="422.1074">key</text><!--link cognito to db--><path d="M655.9515,340.2139 C653.203,383.6099 649.8123,437.1474 647.0618,480.5761 " fill="none" id="cognito-db" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="646.7297,485.8208,651.2908,477.0917,647.0458,480.8308,643.3068,476.5859,646.7297,485.8208" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="656.279,335.0428,651.7179,343.7719,655.9629,340.0328,659.7019,344.2777,656.279,335.0428" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="653" y="408.1387">custom:dispenserId =</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="686" y="422.1074">partiton key</text><!--
@startuml




skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}









sprite $IoTGeneric [64x64/16z] {
xPS7ZiGm24MD9mR_-rzuOvafHA0bcbwUIkfB0TpAfq54PhCvzoy26RS2RTrKeAwR1f1U2ldvjV5A1yO6wCmiW6pFSQkklY3DuhqTG4y1mFc21XnAYiECpGP6
Bqaw-9DyaW7s-901gO-9-iGXf3ucvBwV4SBk-rMxyAEwuKpy69sA0_MqF- -lL0oXJmEnFZ40he4lD2Wc_iQdFa-HxqyezXdWHG39-6tGBtq2UAP2pk3izpQW
C7uLM9mk9Hr_cbykzlqxyYVU_qT-7SYU-4iTsFnv-ISjfDtvKyqyoF73xrVCZqJVhvhl2o0B0pAqPFnjqZIHbFSjMaWry6tz1aNBvlscVatyu__dHFxoyLS_
xZ_EL2__GeD4_apzFQZ_pFVVruqVruzVruwVl_d7jVEtw-UFryzVxVmP03FBTluifqlSwhNpzvz_nVhni_W3
}

skinparam rectangle<<IoTGeneric>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTGeneric>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $IoTCertificateManager [64x64/16z] {
vPQ7TkOw28Gl8Cht_W-ycvXp_ogvf9osawumb04Z__UB4BKFg7o5goCB6fL3hx57ye8S5zW5KE6c7p2F_lka1qsWN9_El83KCy6tKFAcvIZWE0K7Oggu1E07
zDWBCe0uYbww8qtjPp2QlkzWhO42Q_gnIO8TwMkGw-pZkB-nga2AaYNjs6mi79-rA-h_KSkgIb_fLDHSMRzDO2DaDIIwF9K4AYAArJ3eT8YIwX-KjLdIIids
jznzrQI50j5Pf3oqAZV1SviyVpYNIL9Z-ruV37aOA4aWj02NMmTqCbVQ8cX2TWd2CwgYOxtFQViiKjdG0G8WExW1aDAvJkINptZk40xH2NY4Rpy-Y_CeADtC
bloakXbJ9EIKFw3vGQdUEgJFw0KYCERw5M5iQ0Fd3J7Nhyy2nDjgGyte7Ui5NPDz6gYxtZV2U8BTj7f5bvoFfHap6HVgzb0gTsq7NUTyr2S2Zlv1kQcEN5q5
0soz5kokMOtJ-wDLiVjD1-Mosi0-EvUxMch3bbk-OB6N5exFMac17j6LzPQtoVycCMmljvHTUkxN6FiE98-kk8JIlTix3_HPJbtFSvxf3saJSPDJ_Uq1pl4a
WuoaBvOJw0r2kgbiBy6UqEl_9CIBHXMideOrFDoYkA72FFmyluX-YZp2-r4AwYh_Zd-MBn7o3VuegF5LlWGRGhx4jmB6wBc_pWyWjL_3YAlyAi3lJtJLDNu7
RtGAL_d-UE3N-4dPsrB9ytmnUJlhen_7Nm
}

skinparam rectangle<<IoTCertificateManager>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTCertificateManager>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $IoTPolicy [64x64/16z] {
xPQ7SiGW34HHr_x_3sTiCHVkyDYarqskysHf1HgthzQ_B4yLUeuxhdGQW83qCm5vmPydw9_3SqLHUXtFkRyOabx5w-wp0U3Ny1KW2dyDNm6G_7h_0u2zld-6
JVegll2q2l1A_vDt3-HLF2Lu3-Elp9_AUVcQ_J_hzVb_YNyAuBn_nAAcmY_TFnQ-rUM9KZglxzykIOmANZm_9V8DScKY5WlKkjNpspWtW9u_Eu2WjVbHUD31
LslpYn9pJoc0M9kVFkFTB5sPttAxq9mMBUp_c1qfAU3NFDSgzSmmUenCX_oup01k72ZfGm9onFleO2Ah_-6v1o2JHiO5-W7les44s9QeKra9JS0IKDaAo9bt
86aiNxe55U1PiTL6ZxmLFlBRCewW2ev8mFS0Fl9k7KzkzxmZM_GJmyADc1f901Xutv-ry9ctladzfhpd6O3gjFkflfMcKjqOvAD_vSqyl19EPKclxYQdH0p-
ouoNOpkcJ1AJjpRsJsPyTqIReolvFZIFV2CwF6RPccPLJFVMnENzepIhB4LDfkDJwVhvdMlEPNKlu_h-MSjNddqfBnTKat6-EcGDhyL-jwjZmYypW7V_IA9t
Sbrz08LxJ9rSamIwgfYNYzGZCwFg-2RwrnC
}

skinparam rectangle<<IoTPolicy>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTPolicy>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $Cognito [64x64/16z] {
xTHRSeCm38NX8yd2Fkh-zzknubmP1vndlfTSu1ygTwAukLmkhHvfCKV5CMNC6CoF63Gc28rZYZOR7XRl-2aYod4_FmzRwm5z0-5QRz5LzriZl_HD0C2OVVnz
wyNqJUyfA7NBjo5GaozzsfsNzukAsljktXlVv40AvXcWH8WqskBy8jatb37_Oc-e_Nt1zjlvDqWb7S8pVT6XZ9uEG038gUSR1hlrL4WnaLA0SgBdG_QgC8wh
YY9Od1yepqyYPd7GRzwrSA_P2-E1-Nuh_D8hkes0PUznMlQjTenQM_RjOvr4jp1_PPTNNG6eSwL__Y-znwe0_7GVnP9754W-cGwKetxFdskVEliB2E5qipol
SBf17D2TDdvyGwr_stG25-pK28hmdWCa96QuytOm5TWY38mLkNjA6Ndlss9lGO6FVBdFWPjWvBa6bkGER3Bo2eir5HeHR94KDHOPRFT-1HNQnXg3CfRH02rU
5336BwgYqng_OcwcfylbyWy
}

skinparam rectangle<<Cognito>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<Cognito>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $DynamoDBTable [64x64/16z] {
xPT50eH030HxFF3__wu5lMMsSQWJLdWCD6vAjswYExoT4f3Q2jmYVabAxlnae_H-XE8xty54xFq49TJvQUu_ll_Jpq59dH-3YTpv-_w_25C05oh00gGf3ZvL
S8puJqw9dU-TYOl4p-DBKQJpYmrPvlyJQGR48qfZHSHXP_Zxv-EN_NvF_9pKf_Ft_lMRhPyiRF-mw_jZ-pUcVtpYZ_VP-OcUt_QFVtP-fda3
}

skinparam rectangle<<DynamoDBTable>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<DynamoDBTable>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}

top to bottom direction
skinparam linetype polyline
hide stereotype

together {
    rectangle "==testuser\n<color:#D6242D><$Cognito></color>\n//<size:12>[Cognito User]</size>//\n\n custom:dispenserId: 123" <<Cognito>> as cognito
    rectangle "==DispenserTable\n<color:#3B48CC><$DynamoDBTable></color>\n//<size:12>[DynamoDB Table]</size>//\n\n dispenserId: 123" <<DynamoDBTable>> as db
}
rectangle  "IoT Core" as iot  {
    rectangle "==123\n<color:#3F8624><$IoTGeneric></color>\n//<size:12>[IoT Thing]</size>//\n\n " <<IoTGeneric>> as thing
    rectangle "==0ff1ab3\n<color:#3F8624><$IoTCertificateManager></color>\n//<size:12>[X.509 Certificate]</size>//\n\n CN=123" <<IoTCertificateManager>> as cert
    rectangle "==DispenserAccess\n<color:#3F8624><$IoTPolicy></color>\n//<size:12>[IoT Policy]</size>//\n\n Limited Shadow Access" <<IoTPolicy>> as policy
}

thing <-> cert
cert <-> policy
iot <-right-> cognito : "thingName = dispenserId"
iot <-> db : thingName = partiton key
cognito <- -> db : custom:dispenserId = partiton key
@enduml

PlantUML version 1.2019.06(Fri May 24 17:10:25 GMT 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+11-post-Ubuntu-1ubuntu218.04.3
Operating System: Linux
OS Version: 4.9.184-linuxkit
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>