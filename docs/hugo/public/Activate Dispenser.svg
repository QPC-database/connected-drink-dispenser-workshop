<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1729px" preserveAspectRatio="none" style="width:1676px;height:1729px;" version="1.1" viewBox="0 0 1676 1729" width="1676px" zoomAndPan="magnify"><defs><filter height="300%" id="f103bz285fjwxt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="383.1953" style="stroke: #000000; stroke-width: 2.0;" width="1631" x="13" y="216.0391"/><rect fill="#FFFFFF" height="126.6172" style="stroke: none; stroke-width: 1.0;" width="1631" x="13" y="472.6172"/><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="822.6875" style="stroke: #000000; stroke-width: 2.0;" width="1562" x="92" y="801.3438"/><rect fill="#FFFFFF" height="649.7891" style="stroke: none; stroke-width: 1.0;" width="1562" x="92" y="974.2422"/><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="339.4063" style="stroke: #000000; stroke-width: 2.0;" width="1244" x="400" y="1277.625"/><rect fill="#FFFFFF" height="126.6172" style="stroke: none; stroke-width: 1.0;" width="1244" x="400" y="1490.4141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="116" y1="86" y2="606.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="116" x2="116" y1="606.2344" y2="647.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="116" y1="647.0391" y2="1641.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="309" y1="86" y2="606.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="309" x2="309" y1="606.2344" y2="647.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="309" y1="647.0391" y2="1641.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510" x2="510" y1="86" y2="606.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="510" x2="510" y1="606.2344" y2="647.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510" x2="510" y1="647.0391" y2="1641.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="764" x2="764" y1="86" y2="606.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="764" x2="764" y1="606.2344" y2="647.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="764" x2="764" y1="647.0391" y2="1641.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1134" x2="1134" y1="86" y2="606.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1134" x2="1134" y1="606.2344" y2="647.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1134" x2="1134" y1="647.0391" y2="1641.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1339" x2="1339" y1="86" y2="606.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1339" x2="1339" y1="606.2344" y2="647.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1339" x2="1339" y1="647.0391" y2="1641.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1542" x2="1542" y1="86" y2="606.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1542" x2="1542" y1="606.2344" y2="647.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1542" x2="1542" y1="647.0391" y2="1641.0313"/><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="182" x="23" y="3"/><image height="64" width="64" x="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAACV0lEQVR4Xu2ZzUoDMRSF+6auXLpy68a1C9cu3AvuBR9AfIH2AdSBQilIC1IQpB5y6CUk6fwkM+amJhyK+bu53yRzkziz5uKyaM38orJUAXKrAuRWBcitCpBb/x5gdXO7fXrGr1/VruiOjuIBMPbXy+veJLjiN2gXurAvjKRgxADYrqcDMEVjDAPAGLv5gkP+bDafD4/ru/sUAHSHEZiiTRgfitEXwHcdhW9n5+kAMLK8uo7G6AawXf9+/6DronQAuxDGMcQgjA4A+hd03W4wFgBlYwQb2OoAgK12/6YAsBsEn5qtXgAtVqYD6ByaGg0A76Jfe0xorAuAURzBBCX4RSEUzLKL7CRaAJgYNKSEzqGQWS4zYEh7aRNU59DUOAAIGvBPHjn+3h7OOceyjDNaAIp/B04hCvlVFNZMcEMtBoCO+hb0AqAEIVKyfFlX5vpiu6sUgO3pcXOIoWCQYCqmNAJwb8KpWNyil6xFIQ/MnB91APKM1+aIz1pZP411eWCJOoDGmgFn/bAlsqpngFm6hcQdV/o6BwppqQ6AXfiM7fXTmPmx7egFoJz140s7QGdH7QCNmQS5A/gqAKBd6gDKPk4Xf6FhootSQuecHUDplbL4S33x78ApRCG/ql1/DXBshUwEgOHGBOC/poPb6hQAS/O5gHE2FUAO8Uy7+cIhGRGAfsu3iL11tWhRBwDFqBckSQcI+t3/k1kvANHKXAVtEk50NIB8yKDf2+EfXocBiJw5iQag3/2ft69IABHnJGL46I6OUgGyqwLkVgXIrQqQWxUgtypAbv0CxnRE8cHs8y8AAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="100" y="24">«APIGateway»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="107" y="40.2969">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="113.5" y="54.5938">[/dispense]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="182" x="23" y="1640.0313"/><image height="64" width="64" x="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAACV0lEQVR4Xu2ZzUoDMRSF+6auXLpy68a1C9cu3AvuBR9AfIH2AdSBQilIC1IQpB5y6CUk6fwkM+amJhyK+bu53yRzkziz5uKyaM38orJUAXKrAuRWBcitCpBb/x5gdXO7fXrGr1/VruiOjuIBMPbXy+veJLjiN2gXurAvjKRgxADYrqcDMEVjDAPAGLv5gkP+bDafD4/ru/sUAHSHEZiiTRgfitEXwHcdhW9n5+kAMLK8uo7G6AawXf9+/6DronQAuxDGMcQgjA4A+hd03W4wFgBlYwQb2OoAgK12/6YAsBsEn5qtXgAtVqYD6ByaGg0A76Jfe0xorAuAURzBBCX4RSEUzLKL7CRaAJgYNKSEzqGQWS4zYEh7aRNU59DUOAAIGvBPHjn+3h7OOceyjDNaAIp/B04hCvlVFNZMcEMtBoCO+hb0AqAEIVKyfFlX5vpiu6sUgO3pcXOIoWCQYCqmNAJwb8KpWNyil6xFIQ/MnB91APKM1+aIz1pZP411eWCJOoDGmgFn/bAlsqpngFm6hcQdV/o6BwppqQ6AXfiM7fXTmPmx7egFoJz140s7QGdH7QCNmQS5A/gqAKBd6gDKPk4Xf6FhootSQuecHUDplbL4S33x78ApRCG/ql1/DXBshUwEgOHGBOC/poPb6hQAS/O5gHE2FUAO8Uy7+cIhGRGAfsu3iL11tWhRBwDFqBckSQcI+t3/k1kvANHKXAVtEk50NIB8yKDf2+EfXocBiJw5iQag3/2ft69IABHnJGL46I6OUgGyqwLkVgXIrQqQWxUgtypAbv0CxnRE8cHs8y8AAAAASUVORK5CYII=" y="1647.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="100" y="1661.0313">«APIGateway»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="107" y="1677.3281">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="113.5" y="1691.625">[/dispense]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="177" x="219" y="3"/><image height="64" width="64" x="226" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAC8ElEQVR4Xu1asW7jMAzth98fND/gHzC6G7gbMxVdCnQpUNx0wA258VB46KgSJkowJE1RkWLXiB8egoC0rfcsSrIS36WN404GtoabNDB+vCODQR2JBIO4xED/1B1+/YBPikDbEAEe335S8PT/LwbhCwXhAAxyufqCcewGJuwG5AXjuAED0Dy0Orw8ELvjPYrgQYxAiiIoC5WVnguERrnzOWQMPP95xKuvRRAgNZ3DM0A1cJhuz8Kkpv1+8AxQvf7+9ypz1wc0iq3zcaXhGcDqhJshE0sB+wFkyATDbuCauDEDsLLAhM2JY2h1A4dpJeHki+CZATxa0DQAB/NFp57mszSfTDlnDcR7YPhaPltxsOqkrAc0UKVvoFMLUCmzBswUocoApMyujwNOd1Q6KUKtAREHQbDyF7lyVDopwpmB8WtvisRhoFUmywAOa6wHbNV/hiE4KjGFRc/Jj7lwFhIGqBLEiZGuyBrQ5JdtY4DuPXyBB2CawfrAHqWlAXju48TzswbIORdBlsQMqKnPJZAAIcw2oKEL3UzRtoFvPkp3Qo4BM0VoYIB6gBcMryKf6xtITO41xoCZIpwZgGLgRB0RA1edhUCGEMaPaTMLJWsdEOrHmTUua0DTHsSVBhCmSt9bMwOpooQcZKsrayBaQhqOSiclwAc0jG/qChrfWQNmilBlAHX4FHITs4Sd4Kh0UoRaA0GaaxwWg6PSSRGqHiUO4R7gIujcYA90wUeJJrOQBq8iPgZIcdaA5qIG6mchTdtAmhrjxJtnqowbSNPszMfMULgO9MENjYaj0knNYbTWuBQwYKYItQa0oCKM627qMVtJqivZRqkBLHo9A3augVY0VZI9IYx3+4Wz0Lj1nxaXQVkPaAzzY2AZlI0Bjd1ALW7ewHHrf7Oetv5Hdyr/ga05q141QJzUyx50dYrwRUMHe+tlDx7UFxxavexhApX1W3ndRkO3txuQF4xjNzBhYwZGa2/qBHUkEgziEgPfCruBtfEJ2LdbK6cL2EAAAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="93" x="296" y="24">«IoTGeneric»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="307" y="40.2969">Dispenser</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="316" y="54.5938">[Id: 123]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="177" x="219" y="1640.0313"/><image height="64" width="64" x="226" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAC8ElEQVR4Xu1asW7jMAzth98fND/gHzC6G7gbMxVdCnQpUNx0wA258VB46KgSJkowJE1RkWLXiB8egoC0rfcsSrIS36WN404GtoabNDB+vCODQR2JBIO4xED/1B1+/YBPikDbEAEe335S8PT/LwbhCwXhAAxyufqCcewGJuwG5AXjuAED0Dy0Orw8ELvjPYrgQYxAiiIoC5WVnguERrnzOWQMPP95xKuvRRAgNZ3DM0A1cJhuz8Kkpv1+8AxQvf7+9ypz1wc0iq3zcaXhGcDqhJshE0sB+wFkyATDbuCauDEDsLLAhM2JY2h1A4dpJeHki+CZATxa0DQAB/NFp57mszSfTDlnDcR7YPhaPltxsOqkrAc0UKVvoFMLUCmzBswUocoApMyujwNOd1Q6KUKtAREHQbDyF7lyVDopwpmB8WtvisRhoFUmywAOa6wHbNV/hiE4KjGFRc/Jj7lwFhIGqBLEiZGuyBrQ5JdtY4DuPXyBB2CawfrAHqWlAXju48TzswbIORdBlsQMqKnPJZAAIcw2oKEL3UzRtoFvPkp3Qo4BM0VoYIB6gBcMryKf6xtITO41xoCZIpwZgGLgRB0RA1edhUCGEMaPaTMLJWsdEOrHmTUua0DTHsSVBhCmSt9bMwOpooQcZKsrayBaQhqOSiclwAc0jG/qChrfWQNmilBlAHX4FHITs4Sd4Kh0UoRaA0GaaxwWg6PSSRGqHiUO4R7gIujcYA90wUeJJrOQBq8iPgZIcdaA5qIG6mchTdtAmhrjxJtnqowbSNPszMfMULgO9MENjYaj0knNYbTWuBQwYKYItQa0oCKM627qMVtJqivZRqkBLHo9A3augVY0VZI9IYx3+4Wz0Lj1nxaXQVkPaAzzY2AZlI0Bjd1ALW7ewHHrf7Oetv5Hdyr/ga05q141QJzUyx50dYrwRUMHe+tlDx7UFxxavexhApX1W3ndRkO3txuQF4xjNzBhYwZGa2/qBHUkEgziEgPfCruBtfEJ2LdbK6cL2EAAAAAASUVORK5CYII=" y="1647.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="93" x="296" y="1661.0313">«IoTGeneric»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="307" y="1677.3281">Dispenser</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="316" y="1691.625">[Id: 123]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="197" x="410" y="3"/><image height="64" width="64" x="417" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAEeklEQVR4Xt1au67TQBC9H84fkB/wD1j0kaBMhWgi0VwJpUKiCCVCLiiXYSc+OZ7Zlx0n8eVoFPludtdz5rVj576EN44XO7AUw5/fKvaLO+MmAudfPw7fPvZfuu7wfvfpnYpcy4iMn36+2gV3wEICx++fWemcyByZaRevitkExK5Gdflz//WDmFx0lU+5Fg+YCffzxjwCoiKrJepKFNlJEZIMxksy2U5aAzMIiAasTUu+yhxeJc6xM25GKwG2/dx4EC/BFatzaCIgGizWXiGuAId1Y6mJAJLylpLCHHKZswB1Agie270v3tOtxCI6IqxkUG4hIhcteWVQJ6Bmk88Fu3uIFeBMiSVfkecGWIUAbDZ33xzECqxxUsQ/7caqEIDB2nesAnvuxqNamyg+NxBjVVQI6I7t27UANc0nldCYWzBKBODuteIH0ASwoxEoVvJpv0uhRACmajTGWsDh3XLmlAggg1s2WhEwXM5LjBIBnAAPJhCodlcPhzQBWcYt8YNDKIwEVPRwyNFIEOAyp+tzi+8HY0FVI2nHCQGuYrtY5lZsWhZADwdWyWfFhACmyoWqLp/6hPV4kfvC83zGGQ5XAkjZnk5yE04PFo4ZfqjgonIhwMcHRzwIyLgKLISRnLRM84bXcU8gUHnt6Iy7EID5zRolwAtkFzFAY25Us1+7IBYdTCoTUmfchUA/Rr+5pSHAEcWR5qH1oCu+j+CogGjFzBHAV+ijLgR0o941bUzA54OfD8Aiu/zzFz/vQ7oYw3rtCYRxZ9j0HwEs8EVKle5jUcINuEgnDWw0U53sJJomF4fx4UYdq+NJAlile7YSMH1R4R5czeC0pK+giv6JexU2D4sJwAN67ZNJAZ6624le4yFqAd5E9lSv3kTA34NzgMNaxceGT0oWwzaZA1UC8OqVQHCZATCBYdpoyKDPzlkEEGwsVQJG1QsBGMPo5M+BU3wLkszdEEnKDjmxs8fdIKexec4R8MFyIcAhfp1O/uqpRVHBiBFM8NIyWcdzBHzuXXuh/agrL8PgU8QQ4FKOwSsBeIdXasnvXA/zAOnHjlhxLjdzClMETYV5IjjdTa2fEAiZnzCexURufaz9SmIJhEyP5V38ADEK+JwOSQIKQ/2J0s19qGeoEw/xp7vHizYjVqcpKgS2D0tgcI9IWxOj8IQAl6DNiknlCYH9U8/dRtlPW+YEAS1YGxStinUCferpaQvQJq9OoHNPBUN8xXeI/w3h0yiHIT4/9MWXF8AQf670wnNaPWAInNx/dxxTJ6IHMsrcMgm00Ea4d1hCAB2skSqH47SgVefnTn1WdwkBWFGDB+2qDzNGknbyiQxQ5bSFPseXf15dPxKqBLAvRsxLgSRgTo1jvS5z9sq1jIR7EIDTEL5YUkgGr1zLSKgSmBtCHPpcwnnQromApVB/vLp+JFQJJKO5oIef6cWuiUDUGbmVQJhZRnN6QHKuu1cZVbQfZEPxvdA5/3SaW8hzWgn8D63EIb7v3pq0emDjUiJgzv9tiikhEwLhrT9SvkX8BdDjQDnPYzCsAAAAAElFTkSuQmCC" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="94" x="496.5" y="24">«IoTShadow»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="487" y="40.2969">Message Broker</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="538.5" y="54.5938">[]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="197" x="410" y="1640.0313"/><image height="64" width="64" x="417" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAEeklEQVR4Xt1au67TQBC9H84fkB/wD1j0kaBMhWgi0VwJpUKiCCVCLiiXYSc+OZ7Zlx0n8eVoFPludtdz5rVj576EN44XO7AUw5/fKvaLO+MmAudfPw7fPvZfuu7wfvfpnYpcy4iMn36+2gV3wEICx++fWemcyByZaRevitkExK5Gdflz//WDmFx0lU+5Fg+YCffzxjwCoiKrJepKFNlJEZIMxksy2U5aAzMIiAasTUu+yhxeJc6xM25GKwG2/dx4EC/BFatzaCIgGizWXiGuAId1Y6mJAJLylpLCHHKZswB1Agie270v3tOtxCI6IqxkUG4hIhcteWVQJ6Bmk88Fu3uIFeBMiSVfkecGWIUAbDZ33xzECqxxUsQ/7caqEIDB2nesAnvuxqNamyg+NxBjVVQI6I7t27UANc0nldCYWzBKBODuteIH0ASwoxEoVvJpv0uhRACmajTGWsDh3XLmlAggg1s2WhEwXM5LjBIBnAAPJhCodlcPhzQBWcYt8YNDKIwEVPRwyNFIEOAyp+tzi+8HY0FVI2nHCQGuYrtY5lZsWhZADwdWyWfFhACmyoWqLp/6hPV4kfvC83zGGQ5XAkjZnk5yE04PFo4ZfqjgonIhwMcHRzwIyLgKLISRnLRM84bXcU8gUHnt6Iy7EID5zRolwAtkFzFAY25Us1+7IBYdTCoTUmfchUA/Rr+5pSHAEcWR5qH1oCu+j+CogGjFzBHAV+ijLgR0o941bUzA54OfD8Aiu/zzFz/vQ7oYw3rtCYRxZ9j0HwEs8EVKle5jUcINuEgnDWw0U53sJJomF4fx4UYdq+NJAlile7YSMH1R4R5czeC0pK+giv6JexU2D4sJwAN67ZNJAZ6624le4yFqAd5E9lSv3kTA34NzgMNaxceGT0oWwzaZA1UC8OqVQHCZATCBYdpoyKDPzlkEEGwsVQJG1QsBGMPo5M+BU3wLkszdEEnKDjmxs8fdIKexec4R8MFyIcAhfp1O/uqpRVHBiBFM8NIyWcdzBHzuXXuh/agrL8PgU8QQ4FKOwSsBeIdXasnvXA/zAOnHjlhxLjdzClMETYV5IjjdTa2fEAiZnzCexURufaz9SmIJhEyP5V38ADEK+JwOSQIKQ/2J0s19qGeoEw/xp7vHizYjVqcpKgS2D0tgcI9IWxOj8IQAl6DNiknlCYH9U8/dRtlPW+YEAS1YGxStinUCferpaQvQJq9OoHNPBUN8xXeI/w3h0yiHIT4/9MWXF8AQf670wnNaPWAInNx/dxxTJ6IHMsrcMgm00Ea4d1hCAB2skSqH47SgVefnTn1WdwkBWFGDB+2qDzNGknbyiQxQ5bSFPseXf15dPxKqBLAvRsxLgSRgTo1jvS5z9sq1jIR7EIDTEL5YUkgGr1zLSKgSmBtCHPpcwnnQromApVB/vLp+JFQJJKO5oIef6cWuiUDUGbmVQJhZRnN6QHKuu1cZVbQfZEPxvdA5/3SaW8hzWgn8D63EIb7v3pq0emDjUiJgzv9tiikhEwLhrT9SvkX8BdDjQDnPYzCsAAAAAElFTkSuQmCC" y="1647.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="94" x="496.5" y="1661.0313">«IoTShadow»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="487" y="1677.3281">Message Broker</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="538.5" y="1691.625">[]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="282" x="621" y="3"/><image height="64" width="64" x="628" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAADAklEQVR4Xu2aPW7cMBCFfXDfIL4AL2CkF5CUWwVpDKQxEKQKkGJdGsYWKZkHPuxgdvhjkqK03oAPU2gpUppvSInkrO78jevOFhR1+vuWM1u1WiubNwA8fncPX+9ztvz4bBsUBacPP7+4wyc2xwF+dpDUAuDSsdPa4IFtk9fx9Y+4bi6CU7Z2Uc0A6Ien39+0sWfqAXApE3jTFU390AwAj80pDJ4mALjLS+GgprysKwAw2Mn6hVM57Q0g10mGWTqhfhRNgEYAXxwnhVM5NQPg6vBYW+tdcw9rrrysZoCC4X367lscFfSE6HZ7jfowVHBv3CA2jVGIn8Q4Z267iawsxIxPAi3uChN4VEaJCfxh06VEjX69POvegJensFDTbKiAaroV6+iSJo0E8OclmnZXI/XFuKzBAJQZMA+pQTVKmwBQfa/FVm0IgJATYKPYUxMgr5sH8IFhU+/9EAC4aFZHlTaEbQDAouapJlsa8wBJjQfAzJVcMrHwBgDgaHK6RaGZ3T4WgF41uGhJfLrMRPD4+gD0kgAMvMTYqYXxUWWBdDUCJLurXp0AfPMw0tIDPKVHFBaeMPkpIZceYM+seSP1AGBbrF00AD6zcdErIgHQePFuu0bNAPqWXGPGAP4SMnZOAI6X61azVahRM4CMEPEpCeDP+xsX7WC8AuBPoe14rPsBZImPcdy6ZGB9Pr66E3YFEAwM7ibvqWPYE6+fGdYCGBichVvMWmPkmAOcWkJqI267NwBf8zqt0GcuJCNkotgVQEpwe0SXoX2Xx4VFESqjiR541wQwYpqEjyknMnlkC5PuBwLo0wSo1gRIawJUawKkNQGqNQHSmgDVmgBpTYBqTYC0JkC1/h+Awv6wQ/sBSN4Te/M45dYhXEQSLR3/KDcD+MsPSF3ILXPnbuvlxf3+cv7WSCJi61WoB8Bn8s8upEwkvWVsCXmXXOqlI/ZUJ4AP6ZOn80ej3fYYvkJd8zj1A4hwe4wHibGLPoGisVz6B03W+C0aAJAU01jabI1B2gpgN/0DhZeoXa1FkWQAAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="762" y="24">«IoTRule»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="751.5" y="40.2969">Rules Engine</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="198" x="698" y="54.5938">[123/shadow/update/accepted]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="282" x="621" y="1640.0313"/><image height="64" width="64" x="628" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAADAklEQVR4Xu2aPW7cMBCFfXDfIL4AL2CkF5CUWwVpDKQxEKQKkGJdGsYWKZkHPuxgdvhjkqK03oAPU2gpUppvSInkrO78jevOFhR1+vuWM1u1WiubNwA8fncPX+9ztvz4bBsUBacPP7+4wyc2xwF+dpDUAuDSsdPa4IFtk9fx9Y+4bi6CU7Z2Uc0A6Ien39+0sWfqAXApE3jTFU390AwAj80pDJ4mALjLS+GgprysKwAw2Mn6hVM57Q0g10mGWTqhfhRNgEYAXxwnhVM5NQPg6vBYW+tdcw9rrrysZoCC4X367lscFfSE6HZ7jfowVHBv3CA2jVGIn8Q4Z267iawsxIxPAi3uChN4VEaJCfxh06VEjX69POvegJensFDTbKiAaroV6+iSJo0E8OclmnZXI/XFuKzBAJQZMA+pQTVKmwBQfa/FVm0IgJATYKPYUxMgr5sH8IFhU+/9EAC4aFZHlTaEbQDAouapJlsa8wBJjQfAzJVcMrHwBgDgaHK6RaGZ3T4WgF41uGhJfLrMRPD4+gD0kgAMvMTYqYXxUWWBdDUCJLurXp0AfPMw0tIDPKVHFBaeMPkpIZceYM+seSP1AGBbrF00AD6zcdErIgHQePFuu0bNAPqWXGPGAP4SMnZOAI6X61azVahRM4CMEPEpCeDP+xsX7WC8AuBPoe14rPsBZImPcdy6ZGB9Pr66E3YFEAwM7ibvqWPYE6+fGdYCGBichVvMWmPkmAOcWkJqI267NwBf8zqt0GcuJCNkotgVQEpwe0SXoX2Xx4VFESqjiR541wQwYpqEjyknMnlkC5PuBwLo0wSo1gRIawJUawKkNQGqNQHSmgDVmgBpTYBqTYC0JkC1/h+Awv6wQ/sBSN4Te/M45dYhXEQSLR3/KDcD+MsPSF3ILXPnbuvlxf3+cv7WSCJi61WoB8Bn8s8upEwkvWVsCXmXXOqlI/ZUJ4AP6ZOn80ej3fYYvkJd8zj1A4hwe4wHibGLPoGisVz6B03W+C0aAJAU01jabI1B2gpgN/0DhZeoXa1FkWQAAAAASUVORK5CYII=" y="1647.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="762" y="1661.0313">«IoTRule»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="751.5" y="1677.3281">Rules Engine</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="198" x="698" y="1691.625">[123/shadow/update/accepted]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="186" x="1039" y="3"/><image height="64" width="64" x="1046" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAACcUlEQVR4Xu2ZwUoEMQyG99l9Ax/BFxC8edWzB29e9VwWZEEQYdGwgVCaNn+nTacudPjxMI01X/5OMusewv3NVeugb12XFsBsLYDZWgCztQBmqxHg+Hh7enmolP51RzUC/IT33+prKEMXwNfbk653LAqgsPPXp97BS10AdJD0UjZynAnDAT6f7yiS4vWSi4YDSDCR6KV+7QFA52ecCXsAkOg5HmTCTgDjTOgCoIoSQyIdHC6Db5AJXQD6ovslBjbh++NVL/WoEYAmFOVKRRUJUqnliwklwjY1AmQFWz4PZl8TPAECmrtUe3bJ0QRnANht2AT6qZfa5AwQUMt3N8EfAJpAz4CjCT4AlE2cUI0JFONiggMAN5844z1NcACQCSD9Ec5dZnYxoRdAUkmGFGz5bEKp4darF0DySDKGc1fI9dImdQHEJ0H3R2iCPfUq1QWQPIvahAQpkYsJ7QA6P31nBxPaAbKtMHlT0EiJYMOFagQoZabvZzljyWcjvVSjRgDjbCQZa6REnSa0ANg56VVogj31bLUAGOVnJUMKzt0eEzYDHNFrQjbAnrvZX6nUZgD42TwbAE2Arpa0DaCmVKUAu+XLzvxadb78l6AUHGsbADysRgCcu2xCfBnPvWgbQKm6Irup2yaEiw8sLoQzgFFdFte4JyCJdAawqysBRoErY8IIAFg8eMRZ0EaWPwCsHAxIIg0ngzsArK4ElNp8rBoTnAFgde1BqwW7mScA78XbndQXqafou9Sa8rPEBL0bC77/iTCAni/Zq+aPiWTu2lfNnhiAxwpUfflZZKzepGFPDPDPtQBmawHM1gKYrQUwW1cP8AfjyenJIZ4BygAAAABJRU5ErkJggg==" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="1131" y="24">«Lambda»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1116" y="40.2969">Dispenser App</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1162" y="54.5938">[]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="186" x="1039" y="1640.0313"/><image height="64" width="64" x="1046" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAACcUlEQVR4Xu2ZwUoEMQyG99l9Ax/BFxC8edWzB29e9VwWZEEQYdGwgVCaNn+nTacudPjxMI01X/5OMusewv3NVeugb12XFsBsLYDZWgCztQBmqxHg+Hh7enmolP51RzUC/IT33+prKEMXwNfbk653LAqgsPPXp97BS10AdJD0UjZynAnDAT6f7yiS4vWSi4YDSDCR6KV+7QFA52ecCXsAkOg5HmTCTgDjTOgCoIoSQyIdHC6Db5AJXQD6ovslBjbh++NVL/WoEYAmFOVKRRUJUqnliwklwjY1AmQFWz4PZl8TPAECmrtUe3bJ0QRnANht2AT6qZfa5AwQUMt3N8EfAJpAz4CjCT4AlE2cUI0JFONiggMAN5844z1NcACQCSD9Ec5dZnYxoRdAUkmGFGz5bEKp4darF0DySDKGc1fI9dImdQHEJ0H3R2iCPfUq1QWQPIvahAQpkYsJ7QA6P31nBxPaAbKtMHlT0EiJYMOFagQoZabvZzljyWcjvVSjRgDjbCQZa6REnSa0ANg56VVogj31bLUAGOVnJUMKzt0eEzYDHNFrQjbAnrvZX6nUZgD42TwbAE2Arpa0DaCmVKUAu+XLzvxadb78l6AUHGsbADysRgCcu2xCfBnPvWgbQKm6Irup2yaEiw8sLoQzgFFdFte4JyCJdAawqysBRoErY8IIAFg8eMRZ0EaWPwCsHAxIIg0ngzsArK4ElNp8rBoTnAFgde1BqwW7mScA78XbndQXqafou9Sa8rPEBL0bC77/iTCAni/Zq+aPiWTu2lfNnhiAxwpUfflZZKzepGFPDPDPtQBmawHM1gKYrQUwW1cP8AfjyenJIZ4BygAAAABJRU5ErkJggg==" y="1647.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="1131" y="1661.0313">«Lambda»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1116" y="1677.3281">Dispenser App</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1162" y="1691.625">[]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="197" x="1239" y="3"/><image height="64" width="64" x="1246" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAENElEQVR4Xu2aMY8TMRCF+cnbUrikSUmzHdVVdGkoKWhT0J5AFEggkJAogiiQkMKTP3Y059lsbF+U1Um7ejol3rH93ng8nt3cs/Ti05PGs9j0tLAJWBubgLWxCVgbm4AJw/MP5xCNr4h+AZ7f7uVnYXz15e71dw+1qD3aXxE9AiAhcvs3P+4//j7++nu6dH399ufw/ih79FxRRpsAJhYPETJyEqCvUiKKb9/91F2gz2pRuzfWpRYtThy8Dw0CxF4Tm7/FQyy1Dnb3HDCQpUfsEmesQa0A2ENdflUk1E8sGzbJMmLHGtQKEPC9ZFTyBrCv2SfyS/2whioBGleLfsph0zqH7MXslPexukfoLpvkFgLkSIIn2swC99ORr7NAoaaoH9nQJgAq5BDmjsZFR8hpuy8Ym8IOtAmwUNai+6QeQbt3/yyGKTf0xU9qFaBp9EGBiwzI6Svpn6MXEGkX3a92RuuLn9QhAAeL3/IxjIbTovuB2RQLWIkeAZyytKdcCMn3dvRyHle6n/ghID2i8Tn0CDAfw8x7zlAknzgm7ZL6f8keXvW5rkoAIFrGXHKyAufg3R/verB6QMawXx68QK2AIUcOE0DLnB0tcf8pr4AHp3i0p5HjjPArbBbQIMBqIZjJx2qZzaRqFBtP3ZRHcp59RzKtFZBcLSQn+eRDjWCZNHZME78Y2QX72PEiqgQMD2shZhXXw1TGeDGRIhGlW3FY/eUc0N/ibiXaBBynWsiAwc49T8a+xF4R3JF9obwSbQLQAEsvIEryfeNZey32qVWAhb4+yKPj3INVFMM+LsYkzxJX3exTq4BDfhZjblNCTc8OvnPlEC73J6ANeC32qUOAuXa5FjpNOx6udgJYi9jHpNSBHgGxFmIH+3LokOvWNCVf2/rUDpYMOEYegx4BcLJNCbNZ0MuSb8Fed2NubUWVAGC8x/xKKxoUGKbqgwM4sjdtsW89agUMrpSw+AHR2LrYAYwSsfc7m1sLI9SgQYAVc1z3+QXbbC0E7AC2jgV7a4nT1aNWQDpfC1kmpRwinw7Tipmlsb/Pr/RQdaMQMrfZdkz5VaEYz2ZSKiIOWi5Lo7Zi6cwB14o2ARbEHulhLbSfXpiaMGNvow1ufeJ0TWgTwEUKMvb22cN2vD/CgNSSkVYQYE49XqqFxpzjYY+AXX56tDKEoW4tINZCJ/fjBSE0ToUQ4cQ+8Y8NiN/lN74rCDCP4s7igWbhkqVftLTKJkYABQ/tKdRCBkupkMaeLmAFAaRRwnesqIUMccx0SwEA3niURNQHJJGIbnSQpTyrZUa24LJ3I8x4nF4PHxt/bZhFrYA0abBMSkVQxPcsMBjzyW2b/qYPNAbm21/pZ9bHs0+tAoBFwv7SU6VddlZY7MVh+9AjAPgI2T2tfzWYhQ/6AtH4iriagLWwCVgbm4C1sQlYG5uAtfEPOfDxdZNBvAMAAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="1324.5" y="24">«DynamoDB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1316" y="40.2969">Dispenser Table</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1367.5" y="54.5938">[]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="197" x="1239" y="1640.0313"/><image height="64" width="64" x="1246" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAENElEQVR4Xu2aMY8TMRCF+cnbUrikSUmzHdVVdGkoKWhT0J5AFEggkJAogiiQkMKTP3Y059lsbF+U1Um7ejol3rH93ng8nt3cs/Ti05PGs9j0tLAJWBubgLWxCVgbm4AJw/MP5xCNr4h+AZ7f7uVnYXz15e71dw+1qD3aXxE9AiAhcvs3P+4//j7++nu6dH399ufw/ih79FxRRpsAJhYPETJyEqCvUiKKb9/91F2gz2pRuzfWpRYtThy8Dw0CxF4Tm7/FQyy1Dnb3HDCQpUfsEmesQa0A2ENdflUk1E8sGzbJMmLHGtQKEPC9ZFTyBrCv2SfyS/2whioBGleLfsph0zqH7MXslPexukfoLpvkFgLkSIIn2swC99ORr7NAoaaoH9nQJgAq5BDmjsZFR8hpuy8Ym8IOtAmwUNai+6QeQbt3/yyGKTf0xU9qFaBp9EGBiwzI6Svpn6MXEGkX3a92RuuLn9QhAAeL3/IxjIbTovuB2RQLWIkeAZyytKdcCMn3dvRyHle6n/ghID2i8Tn0CDAfw8x7zlAknzgm7ZL6f8keXvW5rkoAIFrGXHKyAufg3R/verB6QMawXx68QK2AIUcOE0DLnB0tcf8pr4AHp3i0p5HjjPArbBbQIMBqIZjJx2qZzaRqFBtP3ZRHcp59RzKtFZBcLSQn+eRDjWCZNHZME78Y2QX72PEiqgQMD2shZhXXw1TGeDGRIhGlW3FY/eUc0N/ibiXaBBynWsiAwc49T8a+xF4R3JF9obwSbQLQAEsvIEryfeNZey32qVWAhb4+yKPj3INVFMM+LsYkzxJX3exTq4BDfhZjblNCTc8OvnPlEC73J6ANeC32qUOAuXa5FjpNOx6udgJYi9jHpNSBHgGxFmIH+3LokOvWNCVf2/rUDpYMOEYegx4BcLJNCbNZ0MuSb8Fed2NubUWVAGC8x/xKKxoUGKbqgwM4sjdtsW89agUMrpSw+AHR2LrYAYwSsfc7m1sLI9SgQYAVc1z3+QXbbC0E7AC2jgV7a4nT1aNWQDpfC1kmpRwinw7Tipmlsb/Pr/RQdaMQMrfZdkz5VaEYz2ZSKiIOWi5Lo7Zi6cwB14o2ARbEHulhLbSfXpiaMGNvow1ufeJ0TWgTwEUKMvb22cN2vD/CgNSSkVYQYE49XqqFxpzjYY+AXX56tDKEoW4tINZCJ/fjBSE0ToUQ4cQ+8Y8NiN/lN74rCDCP4s7igWbhkqVftLTKJkYABQ/tKdRCBkupkMaeLmAFAaRRwnesqIUMccx0SwEA3niURNQHJJGIbnSQpTyrZUa24LJ3I8x4nF4PHxt/bZhFrYA0abBMSkVQxPcsMBjzyW2b/qYPNAbm21/pZ9bHs0+tAoBFwv7SU6VddlZY7MVh+9AjAPgI2T2tfzWYhQ/6AtH4iriagLWwCVgbm4C1sQlYG5uAtfEPOfDxdZNBvAMAAAAASUVORK5CYII=" y="1647.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="1324.5" y="1661.0313">«DynamoDB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1316" y="1677.3281">Dispenser Table</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1367.5" y="1691.625">[]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="180" x="1450" y="3"/><image height="64" width="64" x="1457" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAENElEQVR4Xu2aMY8TMRCF+cnbUrikSUmzHdVVdGkoKWhT0J5AFEggkJAogiiQkMKTP3Y059lsbF+U1Um7ejol3rH93ng8nt3cs/Ti05PGs9j0tLAJWBubgLWxCVgbm4AJw/MP5xCNr4h+AZ7f7uVnYXz15e71dw+1qD3aXxE9AiAhcvs3P+4//j7++nu6dH399ufw/ih79FxRRpsAJhYPETJyEqCvUiKKb9/91F2gz2pRuzfWpRYtThy8Dw0CxF4Tm7/FQyy1Dnb3HDCQpUfsEmesQa0A2ENdflUk1E8sGzbJMmLHGtQKEPC9ZFTyBrCv2SfyS/2whioBGleLfsph0zqH7MXslPexukfoLpvkFgLkSIIn2swC99ORr7NAoaaoH9nQJgAq5BDmjsZFR8hpuy8Ym8IOtAmwUNai+6QeQbt3/yyGKTf0xU9qFaBp9EGBiwzI6Svpn6MXEGkX3a92RuuLn9QhAAeL3/IxjIbTovuB2RQLWIkeAZyytKdcCMn3dvRyHle6n/ghID2i8Tn0CDAfw8x7zlAknzgm7ZL6f8keXvW5rkoAIFrGXHKyAufg3R/verB6QMawXx68QK2AIUcOE0DLnB0tcf8pr4AHp3i0p5HjjPArbBbQIMBqIZjJx2qZzaRqFBtP3ZRHcp59RzKtFZBcLSQn+eRDjWCZNHZME78Y2QX72PEiqgQMD2shZhXXw1TGeDGRIhGlW3FY/eUc0N/ibiXaBBynWsiAwc49T8a+xF4R3JF9obwSbQLQAEsvIEryfeNZey32qVWAhb4+yKPj3INVFMM+LsYkzxJX3exTq4BDfhZjblNCTc8OvnPlEC73J6ANeC32qUOAuXa5FjpNOx6udgJYi9jHpNSBHgGxFmIH+3LokOvWNCVf2/rUDpYMOEYegx4BcLJNCbNZ0MuSb8Fed2NubUWVAGC8x/xKKxoUGKbqgwM4sjdtsW89agUMrpSw+AHR2LrYAYwSsfc7m1sLI9SgQYAVc1z3+QXbbC0E7AC2jgV7a4nT1aNWQDpfC1kmpRwinw7Tipmlsb/Pr/RQdaMQMrfZdkz5VaEYz2ZSKiIOWi5Lo7Zi6cwB14o2ARbEHulhLbSfXpiaMGNvow1ufeJ0TWgTwEUKMvb22cN2vD/CgNSSkVYQYE49XqqFxpzjYY+AXX56tDKEoW4tINZCJ/fjBSE0ToUQ4cQ+8Y8NiN/lN74rCDCP4s7igWbhkqVftLTKJkYABQ/tKdRCBkupkMaeLmAFAaRRwnesqIUMccx0SwEA3niURNQHJJGIbnSQpTyrZUa24LJ3I8x4nF4PHxt/bZhFrYA0abBMSkVQxPcsMBjzyW2b/qYPNAbm21/pZ9bHs0+tAoBFwv7SU6VddlZY7MVh+9AjAPgI2T2tfzWYhQ/6AtH4iriagLWwCVgbm4C1sQlYG5uAtfEPOfDxdZNBvAMAAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="1527" y="24">«DynamoDB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="1530.5" y="40.2969">Events Table</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1570" y="54.5938">[]</text><rect fill="#FFFFFF" filter="url(#f103bz285fjwxt)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="180" x="1450" y="1640.0313"/><image height="64" width="64" x="1457" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAENElEQVR4Xu2aMY8TMRCF+cnbUrikSUmzHdVVdGkoKWhT0J5AFEggkJAogiiQkMKTP3Y059lsbF+U1Um7ejol3rH93ng8nt3cs/Ti05PGs9j0tLAJWBubgLWxCVgbm4AJw/MP5xCNr4h+AZ7f7uVnYXz15e71dw+1qD3aXxE9AiAhcvs3P+4//j7++nu6dH399ufw/ih79FxRRpsAJhYPETJyEqCvUiKKb9/91F2gz2pRuzfWpRYtThy8Dw0CxF4Tm7/FQyy1Dnb3HDCQpUfsEmesQa0A2ENdflUk1E8sGzbJMmLHGtQKEPC9ZFTyBrCv2SfyS/2whioBGleLfsph0zqH7MXslPexukfoLpvkFgLkSIIn2swC99ORr7NAoaaoH9nQJgAq5BDmjsZFR8hpuy8Ym8IOtAmwUNai+6QeQbt3/yyGKTf0xU9qFaBp9EGBiwzI6Svpn6MXEGkX3a92RuuLn9QhAAeL3/IxjIbTovuB2RQLWIkeAZyytKdcCMn3dvRyHle6n/ghID2i8Tn0CDAfw8x7zlAknzgm7ZL6f8keXvW5rkoAIFrGXHKyAufg3R/verB6QMawXx68QK2AIUcOE0DLnB0tcf8pr4AHp3i0p5HjjPArbBbQIMBqIZjJx2qZzaRqFBtP3ZRHcp59RzKtFZBcLSQn+eRDjWCZNHZME78Y2QX72PEiqgQMD2shZhXXw1TGeDGRIhGlW3FY/eUc0N/ibiXaBBynWsiAwc49T8a+xF4R3JF9obwSbQLQAEsvIEryfeNZey32qVWAhb4+yKPj3INVFMM+LsYkzxJX3exTq4BDfhZjblNCTc8OvnPlEC73J6ANeC32qUOAuXa5FjpNOx6udgJYi9jHpNSBHgGxFmIH+3LokOvWNCVf2/rUDpYMOEYegx4BcLJNCbNZ0MuSb8Fed2NubUWVAGC8x/xKKxoUGKbqgwM4sjdtsW89agUMrpSw+AHR2LrYAYwSsfc7m1sLI9SgQYAVc1z3+QXbbC0E7AC2jgV7a4nT1aNWQDpfC1kmpRwinw7Tipmlsb/Pr/RQdaMQMrfZdkz5VaEYz2ZSKiIOWi5Lo7Zi6cwB14o2ARbEHulhLbSfXpiaMGNvow1ufeJ0TWgTwEUKMvb22cN2vD/CgNSSkVYQYE49XqqFxpzjYY+AXX56tDKEoW4tINZCJ/fjBSE0ToUQ4cQ+8Y8NiN/lN74rCDCP4s7igWbhkqVftLTKJkYABQ/tKdRCBkupkMaeLmAFAaRRwnesqIUMccx0SwEA3niURNQHJJGIbnSQpTyrZUa24LJ3I8x4nF4PHxt/bZhFrYA0abBMSkVQxPcsMBjzyW2b/qYPNAbm21/pZ9bHs0+tAoBFwv7SU6VddlZY7MVh+9AjAPgI2T2tfzWYhQ/6AtH4iriagLWwCVgbm4C1sQlYG5uAtfEPOfDxdZNBvAMAAAAASUVORK5CYII=" y="1647.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="1527" y="1661.0313">«DynamoDB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="1530.5" y="1677.3281">Events Table</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1570" y="1691.625">[]</text><rect fill="#EEEEEE" filter="url(#f103bz285fjwxt)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1661" x="3" y="116.5664"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1664" y1="116.5664" y2="116.5664"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1664" y1="119.5664" y2="119.5664"/><rect fill="#EEEEEE" filter="url(#f103bz285fjwxt)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="314" x="676.5" y="106"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="682.5" y="122.0669">Request - Dispense operation from App</text><polygon fill="#666666" points="1122,169.0703,1132,173.0703,1122,177.0703,1126,173.0703" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="116" x2="1128" y1="173.0703" y2="173.0703"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="123" y="154.2715">GET</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="174" x="123" y="168.2402">/dispense?dispenserId=123</text><polygon fill="#666666" points="1145,197.0391,1135,201.0391,1145,205.0391,1141,201.0391" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1327.5,197.0391,1337.5,201.0391,1327.5,205.0391,1331.5,201.0391" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="1139" x2="1333.5" y1="201.0391" y2="201.0391"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="1151" y="196.209">Read dispenser record</text><path d="M13,216.0391 L77,216.0391 L77,223.0391 L67,233.0391 L13,233.0391 L13,216.0391 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="383.1953" style="stroke: #000000; stroke-width: 2.0;" width="1631" x="13" y="216.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="229.106">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="311" x="92" y="228.2495">[if balance &gt;= $1.00 and no dispense requestId]</text><polygon fill="#666666" points="1327.5,277.0781,1337.5,281.0781,1327.5,285.0781,1331.5,281.0781" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="1134" x2="1333.5" y1="281.0781" y2="281.0781"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="1141" y="248.3105">PUT dispense</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="1141" y="262.2793">"requestId":</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="148" x="1141" y="276.248">"1234-5678" to request</text><polygon fill="#666666" points="521.5,340.8945,511.5,344.8945,521.5,348.8945,517.5,344.8945" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="515.5" x2="1133" y1="344.8945" y2="344.8945"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="139" x="527.5" y="340.0645">Add to "desired" state</text><path d="M1139,294.0781 L1139,379.0781 L1337,379.0781 L1337,304.0781 L1327,294.0781 L1139,294.0781 " fill="#FBFB77" filter="url(#f103bz285fjwxt)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1327,294.0781 L1327,304.0781 L1337,304.0781 L1327,294.0781 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1145" y="311.145">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="1161" y="326.2778">"command": "dispense",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="1161" y="341.4106">"requestId": "1234-5678",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1161" y="356.5435">"timestamp": 12345</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1145" y="371.6763">}</text><polygon fill="#666666" points="1530,418.6797,1540,422.6797,1530,426.6797,1534,422.6797" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="1134" x2="1536" y1="422.6797" y2="422.6797"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="1141" y="403.8809">Dispense: Requested</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="1141" y="417.8496">dispenser to activate</text><polygon fill="#666666" points="127,460.6172,117,464.6172,127,468.6172,123,464.6172" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="121" x2="1133" y1="464.6172" y2="464.6172"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="133" y="445.8184">200 - Dispense</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="133" y="459.7871">requested</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1644" y1="473.6172" y2="473.6172"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="270" x="18" y="483.8276">[If no credits or request already recorded]</text><polygon fill="#666666" points="1530,531.3281,1540,535.3281,1530,539.3281,1534,535.3281" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="1134" x2="1536" y1="535.3281" y2="535.3281"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="1141" y="502.5605">Dispense: Error, no</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="1141" y="516.5293">funds or dispense in</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="1141" y="530.498">operation</text><polygon fill="#666666" points="127,587.2344,117,591.2344,127,595.2344,123,591.2344" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 2.0;" x1="1116" x2="1126" y1="586.2344" y2="596.2344"/><line style="stroke: #666666; stroke-width: 2.0;" x1="1116" x2="1126" y1="596.2344" y2="586.2344"/><line style="stroke: #666666; stroke-width: 1.0;" x1="121" x2="1121" y1="591.2344" y2="591.2344"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="133" y="558.4668">200 - Insufficient funds</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="89" x="133" y="572.4355">or dispense in</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="133" y="586.4043">operation</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="770.5" y="630.4448">Some period of time</text><rect fill="#EEEEEE" filter="url(#f103bz285fjwxt)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1661" x="3" y="667.6055"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1664" y1="667.6055" y2="667.6055"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1664" y1="670.6055" y2="670.6055"/><rect fill="#EEEEEE" filter="url(#f103bz285fjwxt)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="361" x="653" y="657.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="342" x="659" y="673.106">Response - Dispenser processes the message</text><polygon fill="#FBFB77" filter="url(#f103bz285fjwxt)" points="215,695.1719,403,695.1719,413,714.1719,403,733.1719,215,733.1719,205,714.1719,215,695.1719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="217" y="711.2388">Dispenser polls for shadow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="217" y="726.3716">updates (delta or document)</text><polygon fill="#666666" points="320.5,782.3438,310.5,786.3438,320.5,790.3438,316.5,786.3438" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="314.5" x2="509.5" y1="786.3438" y2="786.3438"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="147" x="326.5" y="753.5762">desired state "request"</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="113" x="326.5" y="767.5449">object (command,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="139" x="326.5" y="781.5137">requestId, timestamp)</text><path d="M92,801.3438 L156,801.3438 L156,808.3438 L146,818.3438 L92,818.3438 L92,801.3438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="822.6875" style="stroke: #000000; stroke-width: 2.0;" width="1562" x="92" y="801.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="107" y="814.4106">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="283" x="171" y="813.5542">[timestamp of message &gt; 5 seconds (stale)]</text><polygon fill="#666666" points="498.5,884.8438,508.5,888.8438,498.5,892.8438,502.5,888.8438" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="309.5" x2="504.5" y1="888.8438" y2="888.8438"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="316.5" y="870.0449">reported state</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="316.5" y="884.0137">"response" object</text><path d="M102,823.4766 L102,923.4766 L300,923.4766 L300,833.4766 L290,823.4766 L102,823.4766 " fill="#FBFB77" filter="url(#f103bz285fjwxt)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M290,823.4766 L290,833.4766 L300,833.4766 L290,823.4766 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="108" y="840.5435">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="124" y="855.6763">"command": "dispense",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="124" y="870.8091">"requestId": "1234-5678",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="124" y="885.9419">"result": "failure",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="124" y="901.0747">"timestamp": 45678</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="108" y="916.2075">}</text><line style="stroke: #666666; stroke-width: 1.0;" x1="309.5" x2="351.5" y1="953.2422" y2="953.2422"/><line style="stroke: #666666; stroke-width: 1.0;" x1="351.5" x2="351.5" y1="953.2422" y2="966.2422"/><line style="stroke: #666666; stroke-width: 1.0;" x1="322.5" x2="351.5" y1="966.2422" y2="966.2422"/><line style="stroke: #666666; stroke-width: 2.0;" x1="315.5" x2="325.5" y1="961.2422" y2="971.2422"/><line style="stroke: #666666; stroke-width: 2.0;" x1="315.5" x2="325.5" y1="971.2422" y2="961.2422"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="316.5" y="948.4121">discard message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92" x2="1654" y1="975.2422" y2="975.2422"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="243" x="97" y="985.4526">[timestamp &lt; 5 seconds old (current)]</text><line style="stroke: #666666; stroke-width: 1.0;" x1="309.5" x2="351.5" y1="1022.9844" y2="1022.9844"/><line style="stroke: #666666; stroke-width: 1.0;" x1="351.5" x2="351.5" y1="1022.9844" y2="1035.9844"/><line style="stroke: #666666; stroke-width: 1.0;" x1="310.5" x2="351.5" y1="1035.9844" y2="1035.9844"/><polygon fill="#666666" points="320.5,1031.9844,310.5,1035.9844,320.5,1039.9844,316.5,1035.9844" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="316.5" y="1004.1855">Activate motor for nn</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="316.5" y="1018.1543">milliseconds</text><polygon fill="#666666" points="498.5,1110.3516,508.5,1114.3516,498.5,1118.3516,502.5,1114.3516" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="309.5" x2="504.5" y1="1114.3516" y2="1114.3516"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="316.5" y="1095.5527">reported state</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="316.5" y="1109.5215">"response" object</text><path d="M102,1048.9844 L102,1148.9844 L300,1148.9844 L300,1058.9844 L290,1048.9844 L102,1048.9844 " fill="#FBFB77" filter="url(#f103bz285fjwxt)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M290,1048.9844 L290,1058.9844 L300,1058.9844 L290,1048.9844 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="108" y="1066.0513">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="124" y="1081.1841">"command": "dispense",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="124" y="1096.3169">"requestId": "1234-5678",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="124" y="1111.4497">"result": "success",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="124" y="1126.5825">"timestamp": 45678</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="108" y="1141.7153">}</text><polygon fill="#666666" points="752,1188.7188,762,1192.7188,752,1196.7188,756,1192.7188" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="510.5" x2="758" y1="1192.7188" y2="1192.7188"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="97" x="517.5" y="1173.9199">shadow update</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="517.5" y="1187.8887">accepted</text><polygon fill="#666666" points="1122,1230.6563,1132,1234.6563,1122,1238.6563,1126,1234.6563" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="764" x2="1128" y1="1234.6563" y2="1234.6563"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="771" y="1215.8574">Invoke based on</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="239" x="878" y="1215.8574">shadow.state.reported.response</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="775" y="1229.8262">exists</text><polygon fill="#666666" points="1145,1258.625,1135,1262.625,1145,1266.625,1141,1262.625" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1327.5,1258.625,1337.5,1262.625,1327.5,1266.625,1331.5,1262.625" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="1139" x2="1333.5" y1="1262.625" y2="1262.625"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="1151" y="1257.7949">Read dispenser record</text><path d="M400,1277.625 L464,1277.625 L464,1284.625 L454,1294.625 L400,1294.625 L400,1277.625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="339.4063" style="stroke: #000000; stroke-width: 2.0;" width="1244" x="400" y="1277.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="415" y="1290.6919">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="240" x="479" y="1289.8354">[requestId found in dispenser record]</text><polygon fill="#666666" points="1327.5,1366.6016,1337.5,1370.6016,1327.5,1374.6016,1331.5,1370.6016" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="1134" x2="1333.5" y1="1370.6016" y2="1370.6016"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="115" x="1141" y="1309.8965">If requestId found,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="1141" y="1323.8652">Deduct $1.00 from</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="1141" y="1337.834">dispenser 123 credits,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="148" x="1141" y="1351.8027">clear requestId, update</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="1141" y="1365.7715">dispenser record</text><polygon fill="#666666" points="1530,1422.5078,1540,1426.5078,1530,1430.5078,1534,1426.5078" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="1134" x2="1536" y1="1426.5078" y2="1426.5078"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="1141" y="1393.7402">Dispense: Operation</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="1141" y="1407.709">completed successfully</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="1141" y="1421.6777">for dispenser</text><polygon fill="#666666" points="521.5,1478.4141,511.5,1482.4141,521.5,1486.4141,517.5,1482.4141" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="515.5" x2="1133" y1="1482.4141" y2="1482.4141"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="527.5" y="1449.6465">Delete desired.request</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="146" x="527.5" y="1463.6152">and reported.response</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="46" x="527.5" y="1477.584">objects</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="400" x2="1644" y1="1491.4141" y2="1491.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="405" y="1501.6245">[requestId was</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="505" y="1501.6245">NOT</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="536" y="1501.6245">found]</text><polygon fill="#666666" points="1530,1549.125,1540,1553.125,1530,1557.125,1534,1553.125" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="1134" x2="1536" y1="1553.125" y2="1553.125"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="1141" y="1520.3574">Dispense: ERROR, no</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="1141" y="1534.3262">corresponding</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="1141" y="1548.2949">requestId found</text><polygon fill="#666666" points="521.5,1605.0313,511.5,1609.0313,521.5,1613.0313,517.5,1609.0313" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="515.5" x2="1133" y1="1609.0313" y2="1609.0313"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="527.5" y="1576.2637">Delete desired.request</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="146" x="527.5" y="1590.2324">and reported.response</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="46" x="527.5" y="1604.2012">objects</text><!--
@startuml




skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}










sprite $IoTGeneric [64x64/16z] {
xPS7ZiGm24MD9mR_-rzuOvafHA0bcbwUIkfB0TpAfq54PhCvzoy26RS2RTrKeAwR1f1U2ldvjV5A1yO6wCmiW6pFSQkklY3DuhqTG4y1mFc21XnAYiECpGP6
Bqaw-9DyaW7s-901gO-9-iGXf3ucvBwV4SBk-rMxyAEwuKpy69sA0_MqF- -lL0oXJmEnFZ40he4lD2Wc_iQdFa-HxqyezXdWHG39-6tGBtq2UAP2pk3izpQW
C7uLM9mk9Hr_cbykzlqxyYVU_qT-7SYU-4iTsFnv-ISjfDtvKyqyoF73xrVCZqJVhvhl2o0B0pAqPFnjqZIHbFSjMaWry6tz1aNBvlscVatyu__dHFxoyLS_
xZ_EL2__GeD4_apzFQZ_pFVVruqVruzVruwVl_d7jVEtw-UFryzVxVmP03FBTluifqlSwhNpzvz_nVhni_W3
}

skinparam rectangle<<IoTGeneric>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTGeneric>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $IoTCore [64x64/16z] {
xPI7akCW44Hx0fF-_tytGEsXjMKjqkKxlwBIu9xaHlb7ykH9LULrmbjh5XVLBXYmNQaj06apKmROJnUdTr7L-t41x6HrWkQa0USwOBJAIHaeQbbT3N8JKKXZ
8bcRWn3t8O08q0MvGMkdfUXhNKWWUzlgeOhUsZ75Y8FLjFgoVJem1iZYA-F9eJD0xU2UzzrQyr7fKG7UktDXZPag-6420-ST3G0eSaAmH-Nlcm-GXK9gTk3W
_Udtujh_Ce9_gXEBpZC2j2e9aDYy1zlNjxej3W6Q2vX1FcsqfbUGbm40zrn-h7V8hHMZkgTqg6ZkUUNb4loZN8snntvyt-Bp1uC6hTdk9Z_3we6zvuqne9_7
TG9qZhc30vgZHu09ij7N276cnz6NczIYzvZ1iF0nVtW8MgR0yeXG0599r0i3u5wV0Bo7kiSE2LFhgweIi83oNGy8mQk6dO-fldpITstIq8FBHYXo2GN0iT6F
bqoUYqHtmrOVg-hflzhgPSw-X85ywal1UOu6s3VzNDsf1A1eC1_RF8qpFj2y1841Od1Tqy_z_oOzlazlBRr5DilhL3z_84-Ul08
}

skinparam rectangle<<IoTCore>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTCore>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $IoTRule [64x64/16z] {
xTS5SWD134HHmKZgll-5KwkAfnBZ68ClOFpBA8-bEqS_aqkAExaV1qY4oZdA2VA9WGrseQ-ngRrUU-Gz2Ng-7xB9lJx8c8ytz23canjwdQCDKb_Gtpxzo0rk
NdvJcKnMN5f_aWKqyiEOWXDCbcZs9CoHfytjTv5ZoxG719_xppgDhGJ9KBc9rLoGjvZhwtP6sa_knUosB0-ON25v8A_kKMY5s_fIQLetz9Zxge84hkbLagN5
tbiDx1SfkhhieKdqJD2TFUbWAfRMmTYgxYNOGhftaaCkyTxZkkzXTTDzxuqk5sG7xxqui1NTz-1oeIyJDTlVZbMirdgomcIFHP6BVQkCCRn_8xjTx6417e4m
BFKYOYCBd50vJ4IM-wPgvcwcAcsvF-47z3-y_-__-_zUx-c3B9UZlCXOkWL4-lxvnnCaIouBDbHbjAm2MyWA7SKZQgYiKeyiW0se3DURxwRbcTu
}

skinparam rectangle<<IoTRule>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTRule>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $IoTShadow [64x64/16z] {
jPO7pYGh30PjRB3h_WT-RtVG08i6YVv3ANKgmWTOBR-4gifNAJKIoAWcp_5aaYxFi7nfhNfj0P0c3t0WQv6EUW9Lhgb0LPbe1TgJtcqFCwyRA5DVqBoTGe3B
P6sWNEX-6gX1YAYvcygP90-l6tZj2rlbX9sdgKn2vTY9olaTwQgU4CVXXvmexsWqm4zZh7B4wroCF7NXbrlK3l6PN50Eu_HBNv8qbGqBm2zzoAhx-a2gt62n
5nODe1MvHJrOKmY88gN57Kr5F6S3tZTbunRlPG4REq9x1faP4JbPR-95PlUbGFRkwG_QwxvOaGMLWRuG1PTr8mNey1lh2TD8M-iOK8UlqEQvwNxF86Qmi_9K
NkJm9SZrt3IYG5g0BKhgkAarYUbNq7zz0viJT8W6CRuMQGT_zX_bdOi1rHBQYAl4Hx-D-GTpoCaRc_CV_YnOGGvV0yWY7tpV_25MA7FzpKqwMjx82_C_cCg-
VWMY-qH4QstiypVhRSI-VwJr9uqxzlqhsXzPv1rHblCpLahb2GxK_Qz1vOxYEVNrSEGTitvDF7b0Llqmgjhkg2O_Ytw99VulCH9iV8as_VJ7vEg7F2PMFtkC
NbrbHIDqlRLEBm-xRpbJcSaqcGIT-ial8zQ1R_T9ftto6xZQEDMpnRBuKOhbPp-9KLH7TpOR7Cwjtw2-7hJDlnk_0_w79O8ap2nfD_cnSCxll7x98C_hTzu_
MWQwFP8__Ep-hO_9rVyIxRlru_lrw_ly3m
}

skinparam rectangle<<IoTShadow>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTShadow>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $APIGateway [64x64/16z] {
xTO5SiKm30JGZME1r_U_RySfjmhfbvlz67Z66KturtBbYei7fmxh2WZVH83gHtNiZxJWCp2fHTvq0cRVr-onxssxXQ6BZd-n7pzQLbkm1xtb7rgmoEj0-txy
rTZhCQz7VEUhz9E-UcCpU_YYUJtd0H_VHWU43S0vNwInYVZJL_co-SVhd_NDR_C2pNgh90jSBEKLS3gA0vhm5PCD9hG9zRHtmFeoV7O3FDF_CdpIC_sJ0ZI1
qW5XmbFhCdnMpUw_et0awnLwawUtoF-2-fMe7udwbQYVlw1-vNq_ulkgBzhsVTCIUvy0pDgsVDCPmEGCu_MXYTW_uEfSZyjeeaI-32m13aOH-A3dnFFZdygL
AtS
}

skinparam rectangle<<APIGateway>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<APIGateway>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $User [64x64/16z] {
jPO7elGW28GH4vKozp_kNxRmMehXxNvRKqR6g0YzbVAFj7OTQkwcOqsqmSCH-E2BiRi3S1rZYDx-zal15O0-RVDwEoppSWDieK-i1XXVaCktQ4K0ctIWmA0V
220qGzk-iIYmqZd5uPj6sM5puHjjqgSC6ApiEbCwWu5EEupesJuhi2Ik1HtE1zuQdJ1WvM1eEfqWC3hGZpV4J_K___ppuoyJuq-Qc7-9-PzRV-MDwp-GNFu9
oaR-OuqCdCo_ytAgWbl-Pxh1pG10wkIsftZW9cE8EMx4Zh97E8LhUxGIodOxjfKEOG7W_MQyDZ7_Xqcx7NDt0C97mHtmNYWepENRhkhx5dgqV-YlqoP5el4J
Yr9sv5Rfb6hR3GYWF5iSo5RVhSpFx_upDHbVgI_MxslRAqrJ_LkMbQsaCvyZbZYSHO250Wqxix13FuVlT94U1Y9yra051brc03MiLBfCZKuRZAuHijZn4dI0
OrTDi03hN5LrN8qeZ58OzFuZb49WOIF1hUDH52Nehz8tIj5UfTUUGkzw84yX8l4qGlyfQUZt_0K
}

skinparam rectangle<<User>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<User>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $Cognito [64x64/16z] {
xTHRSeCm38NX8yd2Fkh-zzknubmP1vndlfTSu1ygTwAukLmkhHvfCKV5CMNC6CoF63Gc28rZYZOR7XRl-2aYod4_FmzRwm5z0-5QRz5LzriZl_HD0C2OVVnz
wyNqJUyfA7NBjo5GaozzsfsNzukAsljktXlVv40AvXcWH8WqskBy8jatb37_Oc-e_Nt1zjlvDqWb7S8pVT6XZ9uEG038gUSR1hlrL4WnaLA0SgBdG_QgC8wh
YY9Od1yepqyYPd7GRzwrSA_P2-E1-Nuh_D8hkes0PUznMlQjTenQM_RjOvr4jp1_PPTNNG6eSwL__Y-znwe0_7GVnP9754W-cGwKetxFdskVEliB2E5qipol
SBf17D2TDdvyGwr_stG25-pK28hmdWCa96QuytOm5TWY38mLkNjA6Ndlss9lGO6FVBdFWPjWvBa6bkGER3Bo2eir5HeHR94KDHOPRFT-1HNQnXg3CfRH02rU
5336BwgYqng_OcwcfylbyWy
}

skinparam rectangle<<Cognito>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<Cognito>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $Lambda [64x64/16z] {
xPQ7QWGn44CrFV__m-bcPHy63-b5ARTDw1qZXhtxLlhNloecjVsAIT7t-vNkaBw_fhDuap-XVVzycc_o1xJlPmcoxNyBW2BhMQDF1D3fZzO0W7Nyhl8e1U82
g8R_Tl3U0hXjNW7LzmS3UDVDWtyxW7K1t1S0QG4aa6y1KC2cvcKB8262cWPldJrY28TDpKj89xuA1D1SP0P_jHRQ0CFK1k3uKLe626WZVdmQlBL92Tcw01pF
0ArDkdOc8Gs0qLawD4HZamPiEIG0Xnt6yzTL1X0HZOETGOVKF0S0-C7Eed5pywegu2VnkHuEvTRFcHpAntl_cYaBre6VSkYGkBP-pgIX4y21dp8DiPdBtf-0
NwzjjGucNcKxluFaQo_vti6BQwrmoxtle7_zwm4
}

skinparam rectangle<<Lambda>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<Lambda>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $DynamoDB [64x64/16z] {
xPP7bkiu40IpOChb_Uyx3P8DIEE0xtQALHl5AqaCcFm3VFZ0RtvApGYtWSVz-pbCrofObAQHFBQr091IMrVLtkhu5TKETHEWghzzVXya1riTQF7-EiOBkK5W
ZxnqmQBnVySxAlCTDfHwqyhUb_ZxU4ZoeS5tFiIIV1klyrT8vcu-K3IID_VuzUKsxlpc5O3KhkRkyJgU5RxtoLZv-HW_URw9ZQyzcM7QM-jlumr51niVS2Pl
nlZfTzm4_wyVj_xsvUSap4o1dlyD5T2vNXc03EpvdLdGkUaVqYoIWoZ31lHsXjwuwxyBW38UODuK1AUUs_wPrWe0bDiAb6TwHTtt5_SZ3ZVx_aYTKsSUziyl
LdLBF-XVkh_kFY8vQ2X3t_ORxUg_gPb_SILreg_-S_MFoWPZig74qW_wzsi1D4z1a1qIZ3DVPly3HtrqBxb7uAxlGUkjhwrnqsz_FQzO40fnEX07ljw7JQm5
N1IuTFZoj_tBTNmP3NBfLHLr-fl-lJyFiB02C6OaxuwslZW7L__gAPUUIHgEV41d_qCQEideMFvv_rwCpB06oFBt_QCy_PlsMW183pdpv_wnADsJUUhtzjt_
5whccMJceLzd_vCSB7_NZsl-4x8VznzpvfJJAoJui_UdNe0I_BNx6t_b_aZ-gVlh_lxyv_ZmuIy
}

skinparam rectangle<<DynamoDB>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<DynamoDB>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}

participant "API Gateway\n<size:12>[/dispense]</size>" as api << ($APIGateway, #D6242D) APIGateway>> order 10
participant "Dispenser\n<size:12>[Id: 123]</size>" as dispenser << ($IoTGeneric, #3F8624) IoTGeneric>> order 20
participant "Message Broker\n<size:12>[]</size>" as shadow << ($IoTShadow, #3F8624) IoTShadow>> order 30
participant "Rules Engine\n<size:12>[123/shadow/update/accepted]</size>" as rules << ($IoTRule, #3F8624) IoTRule>> order 40
participant "Dispenser App\n<size:12>[]</size>" as app << ($Lambda, #D86613) Lambda>> order 50
participant "Dispenser Table\n<size:12>[]</size>" as db << ($DynamoDB, #3B48CC) DynamoDB>> order 60
participant "Events Table\n<size:12>[]</size>" as log_db << ($DynamoDB, #3B48CC) DynamoDB>> order 70

skinparam noteTextAlignment left

== Request - Dispense operation from App ==
api -> app : GET /dispense?dispenserId=123
app <-> db : Read dispenser record
alt if balance >= $1.00 and no dispense requestId
    app -> db : PUT dispense "requestId": "1234-5678" to request
    app -> shadow: Add to "desired" state
    note right
        {
            "command": "dispense",
            "requestId": "1234-5678",
            "timestamp": 12345
        }
    end note
    app -> log_db : Dispense: Requested dispenser to activate
    app -> api : 200 - Dispense requested
else If no credits or request already recorded
    app -> log_db : Dispense: Error, no funds or dispense in operation
    app x-> api : 200 - Insufficient funds or dispense in operation
end
... Some period of time ...
== Response - Dispenser processes the message ==
hnote over dispenser : Dispenser polls for shadow updates (delta or document)
shadow -> dispenser : desired state "request" object (command, requestId, timestamp)
alt timestamp of message > 5 seconds (stale)
    dispenser -> shadow : reported state "response" object
    note left
        {
            "command": "dispense",
            "requestId": "1234-5678",
            "result": "failure",
            "timestamp": 45678
        }
    end note
    dispenser -x dispenser : discard message
else timestamp < 5 seconds old (current)
    dispenser -> dispenser : Activate motor for nn milliseconds
    dispenser -> shadow : reported state "response" object
    note left
        {
            "command": "dispense",
            "requestId": "1234-5678",
            "result": "success",
            "timestamp": 45678
        }
    end note
    shadow -> rules: shadow update accepted
    rules -> app : Invoke based on <b>shadow.state.reported.response</b> exists
    app <-> db : Read dispenser record
    alt requestId found in dispenser record
        app -> db : If requestId found, Deduct $1.00 from dispenser 123 credits, clear requestId, update dispenser record
        app -> log_db : Dispense: Operation completed successfully for dispenser
        app -> shadow: Delete desired.request and reported.response objects
    else requestId was <i>NOT</i> found
        app -> log_db : Dispense: ERROR, no corresponding requestId found
        app -> shadow: Delete desired.request and reported.response objects
    end
end
@enduml

PlantUML version 1.2019.06(Fri May 24 17:10:25 GMT 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+11-post-Ubuntu-1ubuntu218.04.3
Operating System: Linux
OS Version: 4.9.184-linuxkit
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>