<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1559px" preserveAspectRatio="none" style="width:1483px;height:1559px;" version="1.1" viewBox="0 0 1483 1559" width="1483px" zoomAndPan="magnify"><defs><filter height="300%" id="fpifj769x7nls" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="383.1953" style="stroke: #000000; stroke-width: 2.0;" width="1438" x="13" y="287.1406"/><rect fill="#FFFFFF" height="126.6172" style="stroke: none; stroke-width: 1.0;" width="1438" x="13" y="543.7188"/><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="596.0781" style="stroke: #000000; stroke-width: 2.0;" width="1369" x="92" y="858.4766"/><rect fill="#FFFFFF" height="537.9766" style="stroke: none; stroke-width: 1.0;" width="1369" x="92" y="916.5781"/><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="227.5938" style="stroke: #000000; stroke-width: 2.0;" width="615" x="836" y="1219.9609"/><rect fill="#FFFFFF" height="70.7109" style="stroke: none; stroke-width: 1.0;" width="615" x="836" y="1376.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="116" y1="86" y2="677.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="116" x2="116" y1="677.3359" y2="718.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="116" y1="718.1406" y2="1471.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="309" y1="86" y2="677.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="309" x2="309" y1="677.3359" y2="718.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="309" y1="718.1406" y2="1471.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510" x2="510" y1="86" y2="677.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="510" x2="510" y1="677.3359" y2="718.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510" x2="510" y1="718.1406" y2="1471.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="728" y1="86" y2="677.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="728" x2="728" y1="677.3359" y2="718.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="728" y1="718.1406" y2="1471.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="941" x2="941" y1="86" y2="677.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="941" x2="941" y1="677.3359" y2="718.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="941" x2="941" y1="718.1406" y2="1471.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1146" x2="1146" y1="86" y2="677.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1146" x2="1146" y1="677.3359" y2="718.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1146" x2="1146" y1="718.1406" y2="1471.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1349" x2="1349" y1="86" y2="677.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1349" x2="1349" y1="677.3359" y2="718.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1349" x2="1349" y1="718.1406" y2="1471.5547"/><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="182" x="23" y="3"/><image height="64" width="64" x="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAACV0lEQVR4Xu2ZzUoDMRSF+6auXLpy68a1C9cu3AvuBR9AfIH2AdSBQilIC1IQpB5y6CUk6fwkM+amJhyK+bu53yRzkziz5uKyaM38orJUAXKrAuRWBcitCpBb/x5gdXO7fXrGr1/VruiOjuIBMPbXy+veJLjiN2gXurAvjKRgxADYrqcDMEVjDAPAGLv5gkP+bDafD4/ru/sUAHSHEZiiTRgfitEXwHcdhW9n5+kAMLK8uo7G6AawXf9+/6DronQAuxDGMcQgjA4A+hd03W4wFgBlYwQb2OoAgK12/6YAsBsEn5qtXgAtVqYD6ByaGg0A76Jfe0xorAuAURzBBCX4RSEUzLKL7CRaAJgYNKSEzqGQWS4zYEh7aRNU59DUOAAIGvBPHjn+3h7OOceyjDNaAIp/B04hCvlVFNZMcEMtBoCO+hb0AqAEIVKyfFlX5vpiu6sUgO3pcXOIoWCQYCqmNAJwb8KpWNyil6xFIQ/MnB91APKM1+aIz1pZP411eWCJOoDGmgFn/bAlsqpngFm6hcQdV/o6BwppqQ6AXfiM7fXTmPmx7egFoJz140s7QGdH7QCNmQS5A/gqAKBd6gDKPk4Xf6FhootSQuecHUDplbL4S33x78ApRCG/ql1/DXBshUwEgOHGBOC/poPb6hQAS/O5gHE2FUAO8Uy7+cIhGRGAfsu3iL11tWhRBwDFqBckSQcI+t3/k1kvANHKXAVtEk50NIB8yKDf2+EfXocBiJw5iQag3/2ft69IABHnJGL46I6OUgGyqwLkVgXIrQqQWxUgtypAbv0CxnRE8cHs8y8AAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="100" y="24">«APIGateway»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="107" y="40.2969">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="113.5" y="54.5938">[/dispense]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="182" x="23" y="1470.5547"/><image height="64" width="64" x="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAACV0lEQVR4Xu2ZzUoDMRSF+6auXLpy68a1C9cu3AvuBR9AfIH2AdSBQilIC1IQpB5y6CUk6fwkM+amJhyK+bu53yRzkziz5uKyaM38orJUAXKrAuRWBcitCpBb/x5gdXO7fXrGr1/VruiOjuIBMPbXy+veJLjiN2gXurAvjKRgxADYrqcDMEVjDAPAGLv5gkP+bDafD4/ru/sUAHSHEZiiTRgfitEXwHcdhW9n5+kAMLK8uo7G6AawXf9+/6DronQAuxDGMcQgjA4A+hd03W4wFgBlYwQb2OoAgK12/6YAsBsEn5qtXgAtVqYD6ByaGg0A76Jfe0xorAuAURzBBCX4RSEUzLKL7CRaAJgYNKSEzqGQWS4zYEh7aRNU59DUOAAIGvBPHjn+3h7OOceyjDNaAIp/B04hCvlVFNZMcEMtBoCO+hb0AqAEIVKyfFlX5vpiu6sUgO3pcXOIoWCQYCqmNAJwb8KpWNyil6xFIQ/MnB91APKM1+aIz1pZP411eWCJOoDGmgFn/bAlsqpngFm6hcQdV/o6BwppqQ6AXfiM7fXTmPmx7egFoJz140s7QGdH7QCNmQS5A/gqAKBd6gDKPk4Xf6FhootSQuecHUDplbL4S33x78ApRCG/ql1/DXBshUwEgOHGBOC/poPb6hQAS/O5gHE2FUAO8Uy7+cIhGRGAfsu3iL11tWhRBwDFqBckSQcI+t3/k1kvANHKXAVtEk50NIB8yKDf2+EfXocBiJw5iQag3/2ft69IABHnJGL46I6OUgGyqwLkVgXIrQqQWxUgtypAbv0CxnRE8cHs8y8AAAAASUVORK5CYII=" y="1477.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="100" y="1491.5547">«APIGateway»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="107" y="1507.8516">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="113.5" y="1522.1484">[/dispense]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="177" x="219" y="3"/><image height="64" width="64" x="226" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAC8ElEQVR4Xu1asW7jMAzth98fND/gHzC6G7gbMxVdCnQpUNx0wA258VB46KgSJkowJE1RkWLXiB8egoC0rfcsSrIS36WN404GtoabNDB+vCODQR2JBIO4xED/1B1+/YBPikDbEAEe335S8PT/LwbhCwXhAAxyufqCcewGJuwG5AXjuAED0Dy0Orw8ELvjPYrgQYxAiiIoC5WVnguERrnzOWQMPP95xKuvRRAgNZ3DM0A1cJhuz8Kkpv1+8AxQvf7+9ypz1wc0iq3zcaXhGcDqhJshE0sB+wFkyATDbuCauDEDsLLAhM2JY2h1A4dpJeHki+CZATxa0DQAB/NFp57mszSfTDlnDcR7YPhaPltxsOqkrAc0UKVvoFMLUCmzBswUocoApMyujwNOd1Q6KUKtAREHQbDyF7lyVDopwpmB8WtvisRhoFUmywAOa6wHbNV/hiE4KjGFRc/Jj7lwFhIGqBLEiZGuyBrQ5JdtY4DuPXyBB2CawfrAHqWlAXju48TzswbIORdBlsQMqKnPJZAAIcw2oKEL3UzRtoFvPkp3Qo4BM0VoYIB6gBcMryKf6xtITO41xoCZIpwZgGLgRB0RA1edhUCGEMaPaTMLJWsdEOrHmTUua0DTHsSVBhCmSt9bMwOpooQcZKsrayBaQhqOSiclwAc0jG/qChrfWQNmilBlAHX4FHITs4Sd4Kh0UoRaA0GaaxwWg6PSSRGqHiUO4R7gIujcYA90wUeJJrOQBq8iPgZIcdaA5qIG6mchTdtAmhrjxJtnqowbSNPszMfMULgO9MENjYaj0knNYbTWuBQwYKYItQa0oCKM627qMVtJqivZRqkBLHo9A3augVY0VZI9IYx3+4Wz0Lj1nxaXQVkPaAzzY2AZlI0Bjd1ALW7ewHHrf7Oetv5Hdyr/ga05q141QJzUyx50dYrwRUMHe+tlDx7UFxxavexhApX1W3ndRkO3txuQF4xjNzBhYwZGa2/qBHUkEgziEgPfCruBtfEJ2LdbK6cL2EAAAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="93" x="296" y="24">«IoTGeneric»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="307" y="40.2969">Dispenser</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="316" y="54.5938">[Id: 123]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="177" x="219" y="1470.5547"/><image height="64" width="64" x="226" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAC8ElEQVR4Xu1asW7jMAzth98fND/gHzC6G7gbMxVdCnQpUNx0wA258VB46KgSJkowJE1RkWLXiB8egoC0rfcsSrIS36WN404GtoabNDB+vCODQR2JBIO4xED/1B1+/YBPikDbEAEe335S8PT/LwbhCwXhAAxyufqCcewGJuwG5AXjuAED0Dy0Orw8ELvjPYrgQYxAiiIoC5WVnguERrnzOWQMPP95xKuvRRAgNZ3DM0A1cJhuz8Kkpv1+8AxQvf7+9ypz1wc0iq3zcaXhGcDqhJshE0sB+wFkyATDbuCauDEDsLLAhM2JY2h1A4dpJeHki+CZATxa0DQAB/NFp57mszSfTDlnDcR7YPhaPltxsOqkrAc0UKVvoFMLUCmzBswUocoApMyujwNOd1Q6KUKtAREHQbDyF7lyVDopwpmB8WtvisRhoFUmywAOa6wHbNV/hiE4KjGFRc/Jj7lwFhIGqBLEiZGuyBrQ5JdtY4DuPXyBB2CawfrAHqWlAXju48TzswbIORdBlsQMqKnPJZAAIcw2oKEL3UzRtoFvPkp3Qo4BM0VoYIB6gBcMryKf6xtITO41xoCZIpwZgGLgRB0RA1edhUCGEMaPaTMLJWsdEOrHmTUua0DTHsSVBhCmSt9bMwOpooQcZKsrayBaQhqOSiclwAc0jG/qChrfWQNmilBlAHX4FHITs4Sd4Kh0UoRaA0GaaxwWg6PSSRGqHiUO4R7gIujcYA90wUeJJrOQBq8iPgZIcdaA5qIG6mchTdtAmhrjxJtnqowbSNPszMfMULgO9MENjYaj0knNYbTWuBQwYKYItQa0oCKM627qMVtJqivZRqkBLHo9A3augVY0VZI9IYx3+4Wz0Lj1nxaXQVkPaAzzY2AZlI0Bjd1ALW7ewHHrf7Oetv5Hdyr/ga05q141QJzUyx50dYrwRUMHe+tlDx7UFxxavexhApX1W3ndRkO3txuQF4xjNzBhYwZGa2/qBHUkEgziEgPfCruBtfEJ2LdbK6cL2EAAAAAASUVORK5CYII=" y="1477.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="93" x="296" y="1491.5547">«IoTGeneric»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="307" y="1507.8516">Dispenser</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="316" y="1522.1484">[Id: 123]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="197" x="410" y="3"/><image height="64" width="64" x="417" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAADiElEQVR4Xu2ZsarcMBBF3w/nDwL+gOgH9gce6VIsJOVW4TWBNIGQKpAiKUPYIuXm4osvg8aWR1o5ZsHmFt61ZM0ZzYxm33tKH14/tJ78V4+lA2BvHQB76wDYWwfA3uoMMLx7RflHG6kbwOny5vnldPn6njp/fotv/LDu6gAAu7/9+nKbu37+/gESP6Wj7gKAj2X69e+fT98/0vcQ7mG9MADpp3dROwBsgtHWPkW/buzmbLQVjQDwPa2Hp/3TTNgWMmyxD40ADA9YFik4GAP3M8xAHpkSVzUAlqdHERv+6ZIwC3vFWZgOfsBA+HhnaFUDQAyehirJibwIwPtIHC6pGoDBgCVrI8FuneBVCZoZqgFYVZrTMZsIKtWDhi1NtQBYj+nbttistDPBkpCpDkDFxD+6R9gWvrahAYkC2EO3qv5EpCgiBrbCj1lSCAALMHLubAoKEcJekKW2ykchAFoff2kmNhR4CewrRwhzumq5dQDGPV7qH0WkPoIXD2M/LBMjKnLGrQPQH22RA1tpNLNTh3EhltK4D0zriNdWAGhB5EWzosW2PtK1EXcE6/UKQPO5i4m2UximBltf2vPYS73TahSFAGqPGFtMeIM36LcBXEvvAmZpK3S67QBA62ncMDXSuhSNgpxl6AbAZApWtGSO6pPp+3UI2o5NJi6d68HisQKQKpvn2Ry17rQ7qUD3OabmInu/1wpAYQ0vWulHluNh1kF0fwY8qxWAZBqVwuvwiEsSIHtaAHiefg/YiVVxuw6Qpjdqjdntvo0JSmuytWcBhum0shOV4ngUDNoQQDKuuo5//zmbvlfbnUzbxwFMhiwH+L0yW70nP/pdKisKkEbjVPtupiO4jr9uOUa26gJPtgOKmZtJ02EquD6FyqoAoIBxHv/wJlcpC4fxuNVpxRuaaAFoOp6qZHEivVN15qQGAMquoXIOC6zRyWxOBsBtocuzicHQlxoBMtnQgnEyogDAATbersudRUF9AJLJEBvEqwCnqd9uMJ3qBkDZsObHMoAKUVXcW3UGUFjTowUAZa1g2tQZIJmwPo8/CZYAmrM2U3+A5FITJgpApy8x7rQ+bQSQxpObR/LS5VumNm0FQDGnRYKPvGcO+PEN2hxgKQf84DYdAEUxhNLjAsDiy9gtP4//A2fNuYz/ivWD27QtgJWytlf6Uv8PYCMdAHvrANhbB8DeOgD21sMD/AOOEtGV8t6vTQAAAABJRU5ErkJggg==" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="507.5" y="24">«IoTCore»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="487" y="40.2969">Message Broker</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="538.5" y="54.5938">[]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="197" x="410" y="1470.5547"/><image height="64" width="64" x="417" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAADiElEQVR4Xu2ZsarcMBBF3w/nDwL+gOgH9gce6VIsJOVW4TWBNIGQKpAiKUPYIuXm4osvg8aWR1o5ZsHmFt61ZM0ZzYxm33tKH14/tJ78V4+lA2BvHQB76wDYWwfA3uoMMLx7RflHG6kbwOny5vnldPn6njp/fotv/LDu6gAAu7/9+nKbu37+/gESP6Wj7gKAj2X69e+fT98/0vcQ7mG9MADpp3dROwBsgtHWPkW/buzmbLQVjQDwPa2Hp/3TTNgWMmyxD40ADA9YFik4GAP3M8xAHpkSVzUAlqdHERv+6ZIwC3vFWZgOfsBA+HhnaFUDQAyehirJibwIwPtIHC6pGoDBgCVrI8FuneBVCZoZqgFYVZrTMZsIKtWDhi1NtQBYj+nbttistDPBkpCpDkDFxD+6R9gWvrahAYkC2EO3qv5EpCgiBrbCj1lSCAALMHLubAoKEcJekKW2ykchAFoff2kmNhR4CewrRwhzumq5dQDGPV7qH0WkPoIXD2M/LBMjKnLGrQPQH22RA1tpNLNTh3EhltK4D0zriNdWAGhB5EWzosW2PtK1EXcE6/UKQPO5i4m2UximBltf2vPYS73TahSFAGqPGFtMeIM36LcBXEvvAmZpK3S67QBA62ncMDXSuhSNgpxl6AbAZApWtGSO6pPp+3UI2o5NJi6d68HisQKQKpvn2Ry17rQ7qUD3OabmInu/1wpAYQ0vWulHluNh1kF0fwY8qxWAZBqVwuvwiEsSIHtaAHiefg/YiVVxuw6Qpjdqjdntvo0JSmuytWcBhum0shOV4ngUDNoQQDKuuo5//zmbvlfbnUzbxwFMhiwH+L0yW70nP/pdKisKkEbjVPtupiO4jr9uOUa26gJPtgOKmZtJ02EquD6FyqoAoIBxHv/wJlcpC4fxuNVpxRuaaAFoOp6qZHEivVN15qQGAMquoXIOC6zRyWxOBsBtocuzicHQlxoBMtnQgnEyogDAATbersudRUF9AJLJEBvEqwCnqd9uMJ3qBkDZsObHMoAKUVXcW3UGUFjTowUAZa1g2tQZIJmwPo8/CZYAmrM2U3+A5FITJgpApy8x7rQ+bQSQxpObR/LS5VumNm0FQDGnRYKPvGcO+PEN2hxgKQf84DYdAEUxhNLjAsDiy9gtP4//A2fNuYz/ivWD27QtgJWytlf6Uv8PYCMdAHvrANhbB8DeOgD21sMD/AOOEtGV8t6vTQAAAABJRU5ErkJggg==" y="1477.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="507.5" y="1491.5547">«IoTCore»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="487" y="1507.8516">Message Broker</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="538.5" y="1522.1484">[]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="211" x="621" y="3"/><image height="64" width="64" x="628" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAADAklEQVR4Xu2aPW7cMBCFfXDfIL4AL2CkF5CUWwVpDKQxEKQKkGJdGsYWKZkHPuxgdvhjkqK03oAPU2gpUppvSInkrO78jevOFhR1+vuWM1u1WiubNwA8fncPX+9ztvz4bBsUBacPP7+4wyc2xwF+dpDUAuDSsdPa4IFtk9fx9Y+4bi6CU7Z2Uc0A6Ien39+0sWfqAXApE3jTFU390AwAj80pDJ4mALjLS+GgprysKwAw2Mn6hVM57Q0g10mGWTqhfhRNgEYAXxwnhVM5NQPg6vBYW+tdcw9rrrysZoCC4X367lscFfSE6HZ7jfowVHBv3CA2jVGIn8Q4Z267iawsxIxPAi3uChN4VEaJCfxh06VEjX69POvegJensFDTbKiAaroV6+iSJo0E8OclmnZXI/XFuKzBAJQZMA+pQTVKmwBQfa/FVm0IgJATYKPYUxMgr5sH8IFhU+/9EAC4aFZHlTaEbQDAouapJlsa8wBJjQfAzJVcMrHwBgDgaHK6RaGZ3T4WgF41uGhJfLrMRPD4+gD0kgAMvMTYqYXxUWWBdDUCJLurXp0AfPMw0tIDPKVHFBaeMPkpIZceYM+seSP1AGBbrF00AD6zcdErIgHQePFuu0bNAPqWXGPGAP4SMnZOAI6X61azVahRM4CMEPEpCeDP+xsX7WC8AuBPoe14rPsBZImPcdy6ZGB9Pr66E3YFEAwM7ibvqWPYE6+fGdYCGBichVvMWmPkmAOcWkJqI267NwBf8zqt0GcuJCNkotgVQEpwe0SXoX2Xx4VFESqjiR541wQwYpqEjyknMnlkC5PuBwLo0wSo1gRIawJUawKkNQGqNQHSmgDVmgBpTYBqTYC0JkC1/h+Awv6wQ/sBSN4Te/M45dYhXEQSLR3/KDcD+MsPSF3ILXPnbuvlxf3+cv7WSCJi61WoB8Bn8s8upEwkvWVsCXmXXOqlI/ZUJ4AP6ZOn80ej3fYYvkJd8zj1A4hwe4wHibGLPoGisVz6B03W+C0aAJAU01jabI1B2gpgN/0DhZeoXa1FkWQAAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="726.5" y="24">«IoTRule»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="716" y="40.2969">Rules Engine</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="127" x="698" y="54.5938">[cmd/123/response]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="211" x="621" y="1470.5547"/><image height="64" width="64" x="628" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAADAklEQVR4Xu2aPW7cMBCFfXDfIL4AL2CkF5CUWwVpDKQxEKQKkGJdGsYWKZkHPuxgdvhjkqK03oAPU2gpUppvSInkrO78jevOFhR1+vuWM1u1WiubNwA8fncPX+9ztvz4bBsUBacPP7+4wyc2xwF+dpDUAuDSsdPa4IFtk9fx9Y+4bi6CU7Z2Uc0A6Ien39+0sWfqAXApE3jTFU390AwAj80pDJ4mALjLS+GgprysKwAw2Mn6hVM57Q0g10mGWTqhfhRNgEYAXxwnhVM5NQPg6vBYW+tdcw9rrrysZoCC4X367lscFfSE6HZ7jfowVHBv3CA2jVGIn8Q4Z267iawsxIxPAi3uChN4VEaJCfxh06VEjX69POvegJensFDTbKiAaroV6+iSJo0E8OclmnZXI/XFuKzBAJQZMA+pQTVKmwBQfa/FVm0IgJATYKPYUxMgr5sH8IFhU+/9EAC4aFZHlTaEbQDAouapJlsa8wBJjQfAzJVcMrHwBgDgaHK6RaGZ3T4WgF41uGhJfLrMRPD4+gD0kgAMvMTYqYXxUWWBdDUCJLurXp0AfPMw0tIDPKVHFBaeMPkpIZceYM+seSP1AGBbrF00AD6zcdErIgHQePFuu0bNAPqWXGPGAP4SMnZOAI6X61azVahRM4CMEPEpCeDP+xsX7WC8AuBPoe14rPsBZImPcdy6ZGB9Pr66E3YFEAwM7ibvqWPYE6+fGdYCGBichVvMWmPkmAOcWkJqI267NwBf8zqt0GcuJCNkotgVQEpwe0SXoX2Xx4VFESqjiR541wQwYpqEjyknMnlkC5PuBwLo0wSo1gRIawJUawKkNQGqNQHSmgDVmgBpTYBqTYC0JkC1/h+Awv6wQ/sBSN4Te/M45dYhXEQSLR3/KDcD+MsPSF3ILXPnbuvlxf3+cv7WSCJi61WoB8Bn8s8upEwkvWVsCXmXXOqlI/ZUJ4AP6ZOn80ej3fYYvkJd8zj1A4hwe4wHibGLPoGisVz6B03W+C0aAJAU01jabI1B2gpgN/0DhZeoXa1FkWQAAAAASUVORK5CYII=" y="1477.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="726.5" y="1491.5547">«IoTRule»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="716" y="1507.8516">Rules Engine</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="127" x="698" y="1522.1484">[cmd/123/response]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="186" x="846" y="3"/><image height="64" width="64" x="853" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAACcUlEQVR4Xu2ZwUoEMQyG99l9Ax/BFxC8edWzB29e9VwWZEEQYdGwgVCaNn+nTacudPjxMI01X/5OMusewv3NVeugb12XFsBsLYDZWgCztQBmqxHg+Hh7enmolP51RzUC/IT33+prKEMXwNfbk653LAqgsPPXp97BS10AdJD0UjZynAnDAT6f7yiS4vWSi4YDSDCR6KV+7QFA52ecCXsAkOg5HmTCTgDjTOgCoIoSQyIdHC6Db5AJXQD6ovslBjbh++NVL/WoEYAmFOVKRRUJUqnliwklwjY1AmQFWz4PZl8TPAECmrtUe3bJ0QRnANht2AT6qZfa5AwQUMt3N8EfAJpAz4CjCT4AlE2cUI0JFONiggMAN5844z1NcACQCSD9Ec5dZnYxoRdAUkmGFGz5bEKp4darF0DySDKGc1fI9dImdQHEJ0H3R2iCPfUq1QWQPIvahAQpkYsJ7QA6P31nBxPaAbKtMHlT0EiJYMOFagQoZabvZzljyWcjvVSjRgDjbCQZa6REnSa0ANg56VVogj31bLUAGOVnJUMKzt0eEzYDHNFrQjbAnrvZX6nUZgD42TwbAE2Arpa0DaCmVKUAu+XLzvxadb78l6AUHGsbADysRgCcu2xCfBnPvWgbQKm6Irup2yaEiw8sLoQzgFFdFte4JyCJdAawqysBRoErY8IIAFg8eMRZ0EaWPwCsHAxIIg0ngzsArK4ElNp8rBoTnAFgde1BqwW7mScA78XbndQXqafou9Sa8rPEBL0bC77/iTCAni/Zq+aPiWTu2lfNnhiAxwpUfflZZKzepGFPDPDPtQBmawHM1gKYrQUwW1cP8AfjyenJIZ4BygAAAABJRU5ErkJggg==" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="938" y="24">«Lambda»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="923" y="40.2969">Dispenser App</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="969" y="54.5938">[]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="186" x="846" y="1470.5547"/><image height="64" width="64" x="853" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAACcUlEQVR4Xu2ZwUoEMQyG99l9Ax/BFxC8edWzB29e9VwWZEEQYdGwgVCaNn+nTacudPjxMI01X/5OMusewv3NVeugb12XFsBsLYDZWgCztQBmqxHg+Hh7enmolP51RzUC/IT33+prKEMXwNfbk653LAqgsPPXp97BS10AdJD0UjZynAnDAT6f7yiS4vWSi4YDSDCR6KV+7QFA52ecCXsAkOg5HmTCTgDjTOgCoIoSQyIdHC6Db5AJXQD6ovslBjbh++NVL/WoEYAmFOVKRRUJUqnliwklwjY1AmQFWz4PZl8TPAECmrtUe3bJ0QRnANht2AT6qZfa5AwQUMt3N8EfAJpAz4CjCT4AlE2cUI0JFONiggMAN5844z1NcACQCSD9Ec5dZnYxoRdAUkmGFGz5bEKp4darF0DySDKGc1fI9dImdQHEJ0H3R2iCPfUq1QWQPIvahAQpkYsJ7QA6P31nBxPaAbKtMHlT0EiJYMOFagQoZabvZzljyWcjvVSjRgDjbCQZa6REnSa0ANg56VVogj31bLUAGOVnJUMKzt0eEzYDHNFrQjbAnrvZX6nUZgD42TwbAE2Arpa0DaCmVKUAu+XLzvxadb78l6AUHGsbADysRgCcu2xCfBnPvWgbQKm6Irup2yaEiw8sLoQzgFFdFte4JyCJdAawqysBRoErY8IIAFg8eMRZ0EaWPwCsHAxIIg0ngzsArK4ElNp8rBoTnAFgde1BqwW7mScA78XbndQXqafou9Sa8rPEBL0bC77/iTCAni/Zq+aPiWTu2lfNnhiAxwpUfflZZKzepGFPDPDPtQBmawHM1gKYrQUwW1cP8AfjyenJIZ4BygAAAABJRU5ErkJggg==" y="1477.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="938" y="1491.5547">«Lambda»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="923" y="1507.8516">Dispenser App</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="969" y="1522.1484">[]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="197" x="1046" y="3"/><image height="64" width="64" x="1053" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAENElEQVR4Xu2aMY8TMRCF+cnbUrikSUmzHdVVdGkoKWhT0J5AFEggkJAogiiQkMKTP3Y059lsbF+U1Um7ejol3rH93ng8nt3cs/Ti05PGs9j0tLAJWBubgLWxCVgbm4AJw/MP5xCNr4h+AZ7f7uVnYXz15e71dw+1qD3aXxE9AiAhcvs3P+4//j7++nu6dH399ufw/ih79FxRRpsAJhYPETJyEqCvUiKKb9/91F2gz2pRuzfWpRYtThy8Dw0CxF4Tm7/FQyy1Dnb3HDCQpUfsEmesQa0A2ENdflUk1E8sGzbJMmLHGtQKEPC9ZFTyBrCv2SfyS/2whioBGleLfsph0zqH7MXslPexukfoLpvkFgLkSIIn2swC99ORr7NAoaaoH9nQJgAq5BDmjsZFR8hpuy8Ym8IOtAmwUNai+6QeQbt3/yyGKTf0xU9qFaBp9EGBiwzI6Svpn6MXEGkX3a92RuuLn9QhAAeL3/IxjIbTovuB2RQLWIkeAZyytKdcCMn3dvRyHle6n/ghID2i8Tn0CDAfw8x7zlAknzgm7ZL6f8keXvW5rkoAIFrGXHKyAufg3R/verB6QMawXx68QK2AIUcOE0DLnB0tcf8pr4AHp3i0p5HjjPArbBbQIMBqIZjJx2qZzaRqFBtP3ZRHcp59RzKtFZBcLSQn+eRDjWCZNHZME78Y2QX72PEiqgQMD2shZhXXw1TGeDGRIhGlW3FY/eUc0N/ibiXaBBynWsiAwc49T8a+xF4R3JF9obwSbQLQAEsvIEryfeNZey32qVWAhb4+yKPj3INVFMM+LsYkzxJX3exTq4BDfhZjblNCTc8OvnPlEC73J6ANeC32qUOAuXa5FjpNOx6udgJYi9jHpNSBHgGxFmIH+3LokOvWNCVf2/rUDpYMOEYegx4BcLJNCbNZ0MuSb8Fed2NubUWVAGC8x/xKKxoUGKbqgwM4sjdtsW89agUMrpSw+AHR2LrYAYwSsfc7m1sLI9SgQYAVc1z3+QXbbC0E7AC2jgV7a4nT1aNWQDpfC1kmpRwinw7Tipmlsb/Pr/RQdaMQMrfZdkz5VaEYz2ZSKiIOWi5Lo7Zi6cwB14o2ARbEHulhLbSfXpiaMGNvow1ufeJ0TWgTwEUKMvb22cN2vD/CgNSSkVYQYE49XqqFxpzjYY+AXX56tDKEoW4tINZCJ/fjBSE0ToUQ4cQ+8Y8NiN/lN74rCDCP4s7igWbhkqVftLTKJkYABQ/tKdRCBkupkMaeLmAFAaRRwnesqIUMccx0SwEA3niURNQHJJGIbnSQpTyrZUa24LJ3I8x4nF4PHxt/bZhFrYA0abBMSkVQxPcsMBjzyW2b/qYPNAbm21/pZ9bHs0+tAoBFwv7SU6VddlZY7MVh+9AjAPgI2T2tfzWYhQ/6AtH4iriagLWwCVgbm4C1sQlYG5uAtfEPOfDxdZNBvAMAAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="1131.5" y="24">«DynamoDB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1123" y="40.2969">Dispenser Table</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1174.5" y="54.5938">[]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="197" x="1046" y="1470.5547"/><image height="64" width="64" x="1053" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAENElEQVR4Xu2aMY8TMRCF+cnbUrikSUmzHdVVdGkoKWhT0J5AFEggkJAogiiQkMKTP3Y059lsbF+U1Um7ejol3rH93ng8nt3cs/Ti05PGs9j0tLAJWBubgLWxCVgbm4AJw/MP5xCNr4h+AZ7f7uVnYXz15e71dw+1qD3aXxE9AiAhcvs3P+4//j7++nu6dH399ufw/ih79FxRRpsAJhYPETJyEqCvUiKKb9/91F2gz2pRuzfWpRYtThy8Dw0CxF4Tm7/FQyy1Dnb3HDCQpUfsEmesQa0A2ENdflUk1E8sGzbJMmLHGtQKEPC9ZFTyBrCv2SfyS/2whioBGleLfsph0zqH7MXslPexukfoLpvkFgLkSIIn2swC99ORr7NAoaaoH9nQJgAq5BDmjsZFR8hpuy8Ym8IOtAmwUNai+6QeQbt3/yyGKTf0xU9qFaBp9EGBiwzI6Svpn6MXEGkX3a92RuuLn9QhAAeL3/IxjIbTovuB2RQLWIkeAZyytKdcCMn3dvRyHle6n/ghID2i8Tn0CDAfw8x7zlAknzgm7ZL6f8keXvW5rkoAIFrGXHKyAufg3R/verB6QMawXx68QK2AIUcOE0DLnB0tcf8pr4AHp3i0p5HjjPArbBbQIMBqIZjJx2qZzaRqFBtP3ZRHcp59RzKtFZBcLSQn+eRDjWCZNHZME78Y2QX72PEiqgQMD2shZhXXw1TGeDGRIhGlW3FY/eUc0N/ibiXaBBynWsiAwc49T8a+xF4R3JF9obwSbQLQAEsvIEryfeNZey32qVWAhb4+yKPj3INVFMM+LsYkzxJX3exTq4BDfhZjblNCTc8OvnPlEC73J6ANeC32qUOAuXa5FjpNOx6udgJYi9jHpNSBHgGxFmIH+3LokOvWNCVf2/rUDpYMOEYegx4BcLJNCbNZ0MuSb8Fed2NubUWVAGC8x/xKKxoUGKbqgwM4sjdtsW89agUMrpSw+AHR2LrYAYwSsfc7m1sLI9SgQYAVc1z3+QXbbC0E7AC2jgV7a4nT1aNWQDpfC1kmpRwinw7Tipmlsb/Pr/RQdaMQMrfZdkz5VaEYz2ZSKiIOWi5Lo7Zi6cwB14o2ARbEHulhLbSfXpiaMGNvow1ufeJ0TWgTwEUKMvb22cN2vD/CgNSSkVYQYE49XqqFxpzjYY+AXX56tDKEoW4tINZCJ/fjBSE0ToUQ4cQ+8Y8NiN/lN74rCDCP4s7igWbhkqVftLTKJkYABQ/tKdRCBkupkMaeLmAFAaRRwnesqIUMccx0SwEA3niURNQHJJGIbnSQpTyrZUa24LJ3I8x4nF4PHxt/bZhFrYA0abBMSkVQxPcsMBjzyW2b/qYPNAbm21/pZ9bHs0+tAoBFwv7SU6VddlZY7MVh+9AjAPgI2T2tfzWYhQ/6AtH4iriagLWwCVgbm4C1sQlYG5uAtfEPOfDxdZNBvAMAAAAASUVORK5CYII=" y="1477.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="1131.5" y="1491.5547">«DynamoDB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1123" y="1507.8516">Dispenser Table</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1174.5" y="1522.1484">[]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="180" x="1257" y="3"/><image height="64" width="64" x="1264" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAENElEQVR4Xu2aMY8TMRCF+cnbUrikSUmzHdVVdGkoKWhT0J5AFEggkJAogiiQkMKTP3Y059lsbF+U1Um7ejol3rH93ng8nt3cs/Ti05PGs9j0tLAJWBubgLWxCVgbm4AJw/MP5xCNr4h+AZ7f7uVnYXz15e71dw+1qD3aXxE9AiAhcvs3P+4//j7++nu6dH399ufw/ih79FxRRpsAJhYPETJyEqCvUiKKb9/91F2gz2pRuzfWpRYtThy8Dw0CxF4Tm7/FQyy1Dnb3HDCQpUfsEmesQa0A2ENdflUk1E8sGzbJMmLHGtQKEPC9ZFTyBrCv2SfyS/2whioBGleLfsph0zqH7MXslPexukfoLpvkFgLkSIIn2swC99ORr7NAoaaoH9nQJgAq5BDmjsZFR8hpuy8Ym8IOtAmwUNai+6QeQbt3/yyGKTf0xU9qFaBp9EGBiwzI6Svpn6MXEGkX3a92RuuLn9QhAAeL3/IxjIbTovuB2RQLWIkeAZyytKdcCMn3dvRyHle6n/ghID2i8Tn0CDAfw8x7zlAknzgm7ZL6f8keXvW5rkoAIFrGXHKyAufg3R/verB6QMawXx68QK2AIUcOE0DLnB0tcf8pr4AHp3i0p5HjjPArbBbQIMBqIZjJx2qZzaRqFBtP3ZRHcp59RzKtFZBcLSQn+eRDjWCZNHZME78Y2QX72PEiqgQMD2shZhXXw1TGeDGRIhGlW3FY/eUc0N/ibiXaBBynWsiAwc49T8a+xF4R3JF9obwSbQLQAEsvIEryfeNZey32qVWAhb4+yKPj3INVFMM+LsYkzxJX3exTq4BDfhZjblNCTc8OvnPlEC73J6ANeC32qUOAuXa5FjpNOx6udgJYi9jHpNSBHgGxFmIH+3LokOvWNCVf2/rUDpYMOEYegx4BcLJNCbNZ0MuSb8Fed2NubUWVAGC8x/xKKxoUGKbqgwM4sjdtsW89agUMrpSw+AHR2LrYAYwSsfc7m1sLI9SgQYAVc1z3+QXbbC0E7AC2jgV7a4nT1aNWQDpfC1kmpRwinw7Tipmlsb/Pr/RQdaMQMrfZdkz5VaEYz2ZSKiIOWi5Lo7Zi6cwB14o2ARbEHulhLbSfXpiaMGNvow1ufeJ0TWgTwEUKMvb22cN2vD/CgNSSkVYQYE49XqqFxpzjYY+AXX56tDKEoW4tINZCJ/fjBSE0ToUQ4cQ+8Y8NiN/lN74rCDCP4s7igWbhkqVftLTKJkYABQ/tKdRCBkupkMaeLmAFAaRRwnesqIUMccx0SwEA3niURNQHJJGIbnSQpTyrZUa24LJ3I8x4nF4PHxt/bZhFrYA0abBMSkVQxPcsMBjzyW2b/qYPNAbm21/pZ9bHs0+tAoBFwv7SU6VddlZY7MVh+9AjAPgI2T2tfzWYhQ/6AtH4iriagLWwCVgbm4C1sQlYG5uAtfEPOfDxdZNBvAMAAAAASUVORK5CYII=" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="1334" y="24">«DynamoDB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="1337.5" y="40.2969">Events Table</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1377" y="54.5938">[]</text><rect fill="#FFFFFF" filter="url(#fpifj769x7nls)" height="78" style="stroke: #FF9900; stroke-width: 1.5;" width="180" x="1257" y="1470.5547"/><image height="64" width="64" x="1264" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAENElEQVR4Xu2aMY8TMRCF+cnbUrikSUmzHdVVdGkoKWhT0J5AFEggkJAogiiQkMKTP3Y059lsbF+U1Um7ejol3rH93ng8nt3cs/Ti05PGs9j0tLAJWBubgLWxCVgbm4AJw/MP5xCNr4h+AZ7f7uVnYXz15e71dw+1qD3aXxE9AiAhcvs3P+4//j7++nu6dH399ufw/ih79FxRRpsAJhYPETJyEqCvUiKKb9/91F2gz2pRuzfWpRYtThy8Dw0CxF4Tm7/FQyy1Dnb3HDCQpUfsEmesQa0A2ENdflUk1E8sGzbJMmLHGtQKEPC9ZFTyBrCv2SfyS/2whioBGleLfsph0zqH7MXslPexukfoLpvkFgLkSIIn2swC99ORr7NAoaaoH9nQJgAq5BDmjsZFR8hpuy8Ym8IOtAmwUNai+6QeQbt3/yyGKTf0xU9qFaBp9EGBiwzI6Svpn6MXEGkX3a92RuuLn9QhAAeL3/IxjIbTovuB2RQLWIkeAZyytKdcCMn3dvRyHle6n/ghID2i8Tn0CDAfw8x7zlAknzgm7ZL6f8keXvW5rkoAIFrGXHKyAufg3R/verB6QMawXx68QK2AIUcOE0DLnB0tcf8pr4AHp3i0p5HjjPArbBbQIMBqIZjJx2qZzaRqFBtP3ZRHcp59RzKtFZBcLSQn+eRDjWCZNHZME78Y2QX72PEiqgQMD2shZhXXw1TGeDGRIhGlW3FY/eUc0N/ibiXaBBynWsiAwc49T8a+xF4R3JF9obwSbQLQAEsvIEryfeNZey32qVWAhb4+yKPj3INVFMM+LsYkzxJX3exTq4BDfhZjblNCTc8OvnPlEC73J6ANeC32qUOAuXa5FjpNOx6udgJYi9jHpNSBHgGxFmIH+3LokOvWNCVf2/rUDpYMOEYegx4BcLJNCbNZ0MuSb8Fed2NubUWVAGC8x/xKKxoUGKbqgwM4sjdtsW89agUMrpSw+AHR2LrYAYwSsfc7m1sLI9SgQYAVc1z3+QXbbC0E7AC2jgV7a4nT1aNWQDpfC1kmpRwinw7Tipmlsb/Pr/RQdaMQMrfZdkz5VaEYz2ZSKiIOWi5Lo7Zi6cwB14o2ARbEHulhLbSfXpiaMGNvow1ufeJ0TWgTwEUKMvb22cN2vD/CgNSSkVYQYE49XqqFxpzjYY+AXX56tDKEoW4tINZCJ/fjBSE0ToUQ4cQ+8Y8NiN/lN74rCDCP4s7igWbhkqVftLTKJkYABQ/tKdRCBkupkMaeLmAFAaRRwnesqIUMccx0SwEA3niURNQHJJGIbnSQpTyrZUa24LJ3I8x4nF4PHxt/bZhFrYA0abBMSkVQxPcsMBjzyW2b/qYPNAbm21/pZ9bHs0+tAoBFwv7SU6VddlZY7MVh+9AjAPgI2T2tfzWYhQ/6AtH4iriagLWwCVgbm4C1sQlYG5uAtfEPOfDxdZNBvAMAAAAASUVORK5CYII=" y="1477.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="1334" y="1491.5547">«DynamoDB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="1337.5" y="1507.8516">Events Table</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="10" x="1377" y="1522.1484">[]</text><rect fill="#EEEEEE" filter="url(#fpifj769x7nls)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1468" x="3" y="116.5664"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1471" y1="116.5664" y2="116.5664"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1471" y1="119.5664" y2="119.5664"/><rect fill="#EEEEEE" filter="url(#fpifj769x7nls)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="164" x="655" y="106"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="661" y="122.0669">Pre-dispense Setup</text><polygon fill="#666666" points="498.5,155.1016,508.5,159.1016,498.5,163.1016,502.5,159.1016" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="309.5" x2="504.5" y1="159.1016" y2="159.1016"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="316.5" y="154.2715">S: cmd/123</text><rect fill="#EEEEEE" filter="url(#fpifj769x7nls)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1468" x="3" y="187.668"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1471" y1="187.668" y2="187.668"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1471" y1="190.668" y2="190.668"/><rect fill="#EEEEEE" filter="url(#fpifj769x7nls)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="314" x="580" y="177.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="586" y="193.1685">Request - Dispense operation from App</text><polygon fill="#666666" points="929,240.1719,939,244.1719,929,248.1719,933,244.1719" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="116" x2="935" y1="244.1719" y2="244.1719"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="123" y="225.373">GET</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="174" x="123" y="239.3418">/dispense?dispenserId=123</text><polygon fill="#666666" points="952,268.1406,942,272.1406,952,276.1406,948,272.1406" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1134.5,268.1406,1144.5,272.1406,1134.5,276.1406,1138.5,272.1406" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="946" x2="1140.5" y1="272.1406" y2="272.1406"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="958" y="267.3105">Read dispenser record</text><path d="M13,287.1406 L77,287.1406 L77,294.1406 L67,304.1406 L13,304.1406 L13,287.1406 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="383.1953" style="stroke: #000000; stroke-width: 2.0;" width="1438" x="13" y="287.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="300.2075">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="311" x="92" y="299.3511">[if balance &gt;= $1.00 and no dispense requestId]</text><polygon fill="#666666" points="1134.5,348.1797,1144.5,352.1797,1134.5,356.1797,1138.5,352.1797" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="941" x2="1140.5" y1="352.1797" y2="352.1797"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="948" y="319.4121">PUT dispense</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="948" y="333.3809">"requestId":</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="148" x="948" y="347.3496">"1234-5678" to request</text><polygon fill="#666666" points="521.5,411.9961,511.5,415.9961,521.5,419.9961,517.5,415.9961" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="515.5" x2="940" y1="415.9961" y2="415.9961"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="527.5" y="411.166">P: cmd/123</text><path d="M946,365.1797 L946,450.1797 L1144,450.1797 L1144,375.1797 L1134,365.1797 L946,365.1797 " fill="#FBFB77" filter="url(#fpifj769x7nls)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1134,365.1797 L1134,375.1797 L1144,375.1797 L1134,365.1797 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="952" y="382.2466">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="968" y="397.3794">"command": "dispense",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="968" y="412.5122">"requestId": "1234-5678",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="968" y="427.645">"timestamp": 12345</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="952" y="442.7778">}</text><polygon fill="#666666" points="1337,489.7813,1347,493.7813,1337,497.7813,1341,493.7813" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="941" x2="1343" y1="493.7813" y2="493.7813"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="948" y="474.9824">Dispense: Requested</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="948" y="488.9512">dispenser to activate</text><polygon fill="#666666" points="127,531.7188,117,535.7188,127,539.7188,123,535.7188" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="121" x2="940" y1="535.7188" y2="535.7188"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="133" y="516.9199">200 - Dispense</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="133" y="530.8887">requested</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1451" y1="544.7188" y2="544.7188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="270" x="18" y="554.9292">[If no credits or request already recorded]</text><polygon fill="#666666" points="1337,602.4297,1347,606.4297,1337,610.4297,1341,606.4297" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="941" x2="1343" y1="606.4297" y2="606.4297"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="948" y="573.6621">Dispense: Error, no</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="948" y="587.6309">funds or dispense in</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="948" y="601.5996">operation</text><polygon fill="#666666" points="127,658.3359,117,662.3359,127,666.3359,123,662.3359" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 2.0;" x1="923" x2="933" y1="657.3359" y2="667.3359"/><line style="stroke: #666666; stroke-width: 2.0;" x1="923" x2="933" y1="667.3359" y2="657.3359"/><line style="stroke: #666666; stroke-width: 1.0;" x1="121" x2="928" y1="662.3359" y2="662.3359"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="133" y="629.5684">200 - Insufficient funds</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="89" x="133" y="643.5371">or dispense in</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="133" y="657.5059">operation</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="674" y="701.5464">Some period of time</text><rect fill="#EEEEEE" filter="url(#fpifj769x7nls)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1468" x="3" y="738.707"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1471" y1="738.707" y2="738.707"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1471" y1="741.707" y2="741.707"/><rect fill="#EEEEEE" filter="url(#fpifj769x7nls)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="361" x="556.5" y="728.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="342" x="562.5" y="744.2075">Response - Dispenser processes the message</text><polygon fill="#FBFB77" filter="url(#fpifj769x7nls)" points="207,766.2734,411,766.2734,421,785.2734,411,804.2734,207,804.2734,197,785.2734,207,766.2734" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="209" y="782.3403">Dispense message received on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="209" y="797.4731">topic cmd/123</text><polygon fill="#666666" points="320.5,839.4766,310.5,843.4766,320.5,847.4766,316.5,843.4766" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="314.5" x2="509.5" y1="843.4766" y2="843.4766"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="326.5" y="824.6777">message (command,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="139" x="326.5" y="838.6465">requestId, timestamp)</text><path d="M92,858.4766 L156,858.4766 L156,865.4766 L146,875.4766 L92,875.4766 L92,858.4766 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="596.0781" style="stroke: #000000; stroke-width: 2.0;" width="1369" x="92" y="858.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="107" y="871.5435">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="283" x="171" y="870.687">[timestamp of message &gt; 5 seconds (stale)]</text><line style="stroke: #666666; stroke-width: 1.0;" x1="309.5" x2="351.5" y1="895.5781" y2="895.5781"/><line style="stroke: #666666; stroke-width: 1.0;" x1="351.5" x2="351.5" y1="895.5781" y2="908.5781"/><line style="stroke: #666666; stroke-width: 1.0;" x1="322.5" x2="351.5" y1="908.5781" y2="908.5781"/><line style="stroke: #666666; stroke-width: 2.0;" x1="315.5" x2="325.5" y1="903.5781" y2="913.5781"/><line style="stroke: #666666; stroke-width: 2.0;" x1="315.5" x2="325.5" y1="913.5781" y2="903.5781"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="316.5" y="890.748">discard message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92" x2="1461" y1="917.5781" y2="917.5781"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="243" x="97" y="927.7886">[timestamp &lt; 5 seconds old (current)]</text><line style="stroke: #666666; stroke-width: 1.0;" x1="309.5" x2="351.5" y1="965.3203" y2="965.3203"/><line style="stroke: #666666; stroke-width: 1.0;" x1="351.5" x2="351.5" y1="965.3203" y2="978.3203"/><line style="stroke: #666666; stroke-width: 1.0;" x1="310.5" x2="351.5" y1="978.3203" y2="978.3203"/><polygon fill="#666666" points="320.5,974.3203,310.5,978.3203,320.5,982.3203,316.5,978.3203" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="316.5" y="946.5215">Activate motor for nn</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="316.5" y="960.4902">milliseconds</text><polygon fill="#666666" points="498.5,1045.7031,508.5,1049.7031,498.5,1053.7031,502.5,1049.7031" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="309.5" x2="504.5" y1="1049.7031" y2="1049.7031"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="316.5" y="1044.873">P: cmd/123/</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="390.5" y="1044.873">response</text><path d="M102,991.3203 L102,1091.3203 L300,1091.3203 L300,1001.3203 L290,991.3203 L102,991.3203 " fill="#FBFB77" filter="url(#fpifj769x7nls)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M290,991.3203 L290,1001.3203 L300,1001.3203 L290,991.3203 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="108" y="1008.3872">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="124" y="1023.52">"command": "dispense",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="124" y="1038.6528">"requestId": "1234-5678",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="124" y="1053.7856">"result": "success",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="124" y="1068.9185">"timestamp": 45678</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="108" y="1084.0513">}</text><polygon fill="#666666" points="716.5,1117.0859,726.5,1121.0859,716.5,1125.0859,720.5,1121.0859" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="510.5" x2="722.5" y1="1121.0859" y2="1121.0859"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="517.5" y="1116.2559">response message</text><polygon fill="#666666" points="929,1172.9922,939,1176.9922,929,1180.9922,933,1176.9922" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="728.5" x2="935" y1="1176.9922" y2="1176.9922"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="735.5" y="1144.2246">Invoke based on</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="735.5" y="1158.1934">command ==</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="146" x="735.5" y="1172.1621">"dispense" -&gt; message</text><polygon fill="#666666" points="952,1200.9609,942,1204.9609,952,1208.9609,948,1204.9609" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1134.5,1200.9609,1144.5,1204.9609,1134.5,1208.9609,1138.5,1204.9609" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="946" x2="1140.5" y1="1204.9609" y2="1204.9609"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="958" y="1200.1309">Read dispenser record</text><path d="M836,1219.9609 L900,1219.9609 L900,1226.9609 L890,1236.9609 L836,1236.9609 L836,1219.9609 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="227.5938" style="stroke: #000000; stroke-width: 2.0;" width="615" x="836" y="1219.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="851" y="1233.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="240" x="915" y="1232.1714">[requestId found in dispenser record]</text><polygon fill="#666666" points="1134.5,1308.9375,1144.5,1312.9375,1134.5,1316.9375,1138.5,1312.9375" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="941" x2="1140.5" y1="1312.9375" y2="1312.9375"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="115" x="948" y="1252.2324">If requestId found,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="948" y="1266.2012">Deduct $1.00 from</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="948" y="1280.1699">dispenser 123 credits,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="148" x="948" y="1294.1387">clear requestId, update</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="948" y="1308.1074">dispenser record</text><polygon fill="#666666" points="1337,1364.8438,1347,1368.8438,1337,1372.8438,1341,1368.8438" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="941" x2="1343" y1="1368.8438" y2="1368.8438"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="948" y="1336.0762">Dispense: Operation</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="948" y="1350.0449">completed successfully</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="948" y="1364.0137">for dispenser</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="836" x2="1451" y1="1377.8438" y2="1377.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="841" y="1388.0542">[requestId was</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="941" y="1388.0542">NOT</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="972" y="1388.0542">found]</text><polygon fill="#666666" points="1337,1435.5547,1347,1439.5547,1337,1443.5547,1341,1439.5547" style="stroke: #666666; stroke-width: 1.0;"/><line style="stroke: #666666; stroke-width: 1.0;" x1="941" x2="1343" y1="1439.5547" y2="1439.5547"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="948" y="1406.7871">Dispense: ERROR, no</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="948" y="1420.7559">corresponding</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="948" y="1434.7246">requestId found</text><!--
@startuml




skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}










sprite $IoTGeneric [64x64/16z] {
xPS7ZiGm24MD9mR_-rzuOvafHA0bcbwUIkfB0TpAfq54PhCvzoy26RS2RTrKeAwR1f1U2ldvjV5A1yO6wCmiW6pFSQkklY3DuhqTG4y1mFc21XnAYiECpGP6
Bqaw-9DyaW7s-901gO-9-iGXf3ucvBwV4SBk-rMxyAEwuKpy69sA0_MqF- -lL0oXJmEnFZ40he4lD2Wc_iQdFa-HxqyezXdWHG39-6tGBtq2UAP2pk3izpQW
C7uLM9mk9Hr_cbykzlqxyYVU_qT-7SYU-4iTsFnv-ISjfDtvKyqyoF73xrVCZqJVhvhl2o0B0pAqPFnjqZIHbFSjMaWry6tz1aNBvlscVatyu__dHFxoyLS_
xZ_EL2__GeD4_apzFQZ_pFVVruqVruzVruwVl_d7jVEtw-UFryzVxVmP03FBTluifqlSwhNpzvz_nVhni_W3
}

skinparam rectangle<<IoTGeneric>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTGeneric>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $IoTCore [64x64/16z] {
xPI7akCW44Hx0fF-_tytGEsXjMKjqkKxlwBIu9xaHlb7ykH9LULrmbjh5XVLBXYmNQaj06apKmROJnUdTr7L-t41x6HrWkQa0USwOBJAIHaeQbbT3N8JKKXZ
8bcRWn3t8O08q0MvGMkdfUXhNKWWUzlgeOhUsZ75Y8FLjFgoVJem1iZYA-F9eJD0xU2UzzrQyr7fKG7UktDXZPag-6420-ST3G0eSaAmH-Nlcm-GXK9gTk3W
_Udtujh_Ce9_gXEBpZC2j2e9aDYy1zlNjxej3W6Q2vX1FcsqfbUGbm40zrn-h7V8hHMZkgTqg6ZkUUNb4loZN8snntvyt-Bp1uC6hTdk9Z_3we6zvuqne9_7
TG9qZhc30vgZHu09ij7N276cnz6NczIYzvZ1iF0nVtW8MgR0yeXG0599r0i3u5wV0Bo7kiSE2LFhgweIi83oNGy8mQk6dO-fldpITstIq8FBHYXo2GN0iT6F
bqoUYqHtmrOVg-hflzhgPSw-X85ywal1UOu6s3VzNDsf1A1eC1_RF8qpFj2y1841Od1Tqy_z_oOzlazlBRr5DilhL3z_84-Ul08
}

skinparam rectangle<<IoTCore>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTCore>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $IoTRule [64x64/16z] {
xTS5SWD134HHmKZgll-5KwkAfnBZ68ClOFpBA8-bEqS_aqkAExaV1qY4oZdA2VA9WGrseQ-ngRrUU-Gz2Ng-7xB9lJx8c8ytz23canjwdQCDKb_Gtpxzo0rk
NdvJcKnMN5f_aWKqyiEOWXDCbcZs9CoHfytjTv5ZoxG719_xppgDhGJ9KBc9rLoGjvZhwtP6sa_knUosB0-ON25v8A_kKMY5s_fIQLetz9Zxge84hkbLagN5
tbiDx1SfkhhieKdqJD2TFUbWAfRMmTYgxYNOGhftaaCkyTxZkkzXTTDzxuqk5sG7xxqui1NTz-1oeIyJDTlVZbMirdgomcIFHP6BVQkCCRn_8xjTx6417e4m
BFKYOYCBd50vJ4IM-wPgvcwcAcsvF-47z3-y_-__-_zUx-c3B9UZlCXOkWL4-lxvnnCaIouBDbHbjAm2MyWA7SKZQgYiKeyiW0se3DURxwRbcTu
}

skinparam rectangle<<IoTRule>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<IoTRule>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $APIGateway [64x64/16z] {
xTO5SiKm30JGZME1r_U_RySfjmhfbvlz67Z66KturtBbYei7fmxh2WZVH83gHtNiZxJWCp2fHTvq0cRVr-onxssxXQ6BZd-n7pzQLbkm1xtb7rgmoEj0-txy
rTZhCQz7VEUhz9E-UcCpU_YYUJtd0H_VHWU43S0vNwInYVZJL_co-SVhd_NDR_C2pNgh90jSBEKLS3gA0vhm5PCD9hG9zRHtmFeoV7O3FDF_CdpIC_sJ0ZI1
qW5XmbFhCdnMpUw_et0awnLwawUtoF-2-fMe7udwbQYVlw1-vNq_ulkgBzhsVTCIUvy0pDgsVDCPmEGCu_MXYTW_uEfSZyjeeaI-32m13aOH-A3dnFFZdygL
AtS
}

skinparam rectangle<<APIGateway>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<APIGateway>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $User [64x64/16z] {
jPO7elGW28GH4vKozp_kNxRmMehXxNvRKqR6g0YzbVAFj7OTQkwcOqsqmSCH-E2BiRi3S1rZYDx-zal15O0-RVDwEoppSWDieK-i1XXVaCktQ4K0ctIWmA0V
220qGzk-iIYmqZd5uPj6sM5puHjjqgSC6ApiEbCwWu5EEupesJuhi2Ik1HtE1zuQdJ1WvM1eEfqWC3hGZpV4J_K___ppuoyJuq-Qc7-9-PzRV-MDwp-GNFu9
oaR-OuqCdCo_ytAgWbl-Pxh1pG10wkIsftZW9cE8EMx4Zh97E8LhUxGIodOxjfKEOG7W_MQyDZ7_Xqcx7NDt0C97mHtmNYWepENRhkhx5dgqV-YlqoP5el4J
Yr9sv5Rfb6hR3GYWF5iSo5RVhSpFx_upDHbVgI_MxslRAqrJ_LkMbQsaCvyZbZYSHO250Wqxix13FuVlT94U1Y9yra051brc03MiLBfCZKuRZAuHijZn4dI0
OrTDi03hN5LrN8qeZ58OzFuZb49WOIF1hUDH52Nehz8tIj5UfTUUGkzw84yX8l4qGlyfQUZt_0K
}

skinparam rectangle<<User>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<User>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $Cognito [64x64/16z] {
xTHRSeCm38NX8yd2Fkh-zzknubmP1vndlfTSu1ygTwAukLmkhHvfCKV5CMNC6CoF63Gc28rZYZOR7XRl-2aYod4_FmzRwm5z0-5QRz5LzriZl_HD0C2OVVnz
wyNqJUyfA7NBjo5GaozzsfsNzukAsljktXlVv40AvXcWH8WqskBy8jatb37_Oc-e_Nt1zjlvDqWb7S8pVT6XZ9uEG038gUSR1hlrL4WnaLA0SgBdG_QgC8wh
YY9Od1yepqyYPd7GRzwrSA_P2-E1-Nuh_D8hkes0PUznMlQjTenQM_RjOvr4jp1_PPTNNG6eSwL__Y-znwe0_7GVnP9754W-cGwKetxFdskVEliB2E5qipol
SBf17D2TDdvyGwr_stG25-pK28hmdWCa96QuytOm5TWY38mLkNjA6Ndlss9lGO6FVBdFWPjWvBa6bkGER3Bo2eir5HeHR94KDHOPRFT-1HNQnXg3CfRH02rU
5336BwgYqng_OcwcfylbyWy
}

skinparam rectangle<<Cognito>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<Cognito>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $Lambda [64x64/16z] {
xPQ7QWGn44CrFV__m-bcPHy63-b5ARTDw1qZXhtxLlhNloecjVsAIT7t-vNkaBw_fhDuap-XVVzycc_o1xJlPmcoxNyBW2BhMQDF1D3fZzO0W7Nyhl8e1U82
g8R_Tl3U0hXjNW7LzmS3UDVDWtyxW7K1t1S0QG4aa6y1KC2cvcKB8262cWPldJrY28TDpKj89xuA1D1SP0P_jHRQ0CFK1k3uKLe626WZVdmQlBL92Tcw01pF
0ArDkdOc8Gs0qLawD4HZamPiEIG0Xnt6yzTL1X0HZOETGOVKF0S0-C7Eed5pywegu2VnkHuEvTRFcHpAntl_cYaBre6VSkYGkBP-pgIX4y21dp8DiPdBtf-0
NwzjjGucNcKxluFaQo_vti6BQwrmoxtle7_zwm4
}

skinparam rectangle<<Lambda>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<Lambda>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
sprite $DynamoDB [64x64/16z] {
xPP7bkiu40IpOChb_Uyx3P8DIEE0xtQALHl5AqaCcFm3VFZ0RtvApGYtWSVz-pbCrofObAQHFBQr091IMrVLtkhu5TKETHEWghzzVXya1riTQF7-EiOBkK5W
ZxnqmQBnVySxAlCTDfHwqyhUb_ZxU4ZoeS5tFiIIV1klyrT8vcu-K3IID_VuzUKsxlpc5O3KhkRkyJgU5RxtoLZv-HW_URw9ZQyzcM7QM-jlumr51niVS2Pl
nlZfTzm4_wyVj_xsvUSap4o1dlyD5T2vNXc03EpvdLdGkUaVqYoIWoZ31lHsXjwuwxyBW38UODuK1AUUs_wPrWe0bDiAb6TwHTtt5_SZ3ZVx_aYTKsSUziyl
LdLBF-XVkh_kFY8vQ2X3t_ORxUg_gPb_SILreg_-S_MFoWPZig74qW_wzsi1D4z1a1qIZ3DVPly3HtrqBxb7uAxlGUkjhwrnqsz_FQzO40fnEX07ljw7JQm5
N1IuTFZoj_tBTNmP3NBfLHLr-fl-lJyFiB02C6OaxuwslZW7L__gAPUUIHgEV41d_qCQEideMFvv_rwCpB06oFBt_QCy_PlsMW183pdpv_wnADsJUUhtzjt_
5whccMJceLzd_vCSB7_NZsl-4x8VznzpvfJJAoJui_UdNe0I_BNx6t_b_aZ-gVlh_lxyv_ZmuIy
}

skinparam rectangle<<DynamoDB>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}
skinparam participant<<DynamoDB>> {
    BackgroundColor #FFFFFF
    BorderColor #FF9900
}

participant "API Gateway\n<size:12>[/dispense]</size>" as api << ($APIGateway, #D6242D) APIGateway>> order 10
participant "Dispenser\n<size:12>[Id: 123]</size>" as dispenser << ($IoTGeneric, #3F8624) IoTGeneric>> order 20
participant "Message Broker\n<size:12>[]</size>" as broker << ($IoTCore, #3F8624) IoTCore>> order 30
participant "Rules Engine\n<size:12>[cmd/123/response]</size>" as rules << ($IoTRule, #3F8624) IoTRule>> order 40
participant "Dispenser App\n<size:12>[]</size>" as app << ($Lambda, #D86613) Lambda>> order 50
participant "Dispenser Table\n<size:12>[]</size>" as db << ($DynamoDB, #3B48CC) DynamoDB>> order 60
participant "Events Table\n<size:12>[]</size>" as log_db << ($DynamoDB, #3B48CC) DynamoDB>> order 70

skinparam noteTextAlignment left

== Pre-dispense Setup ==
dispenser -> broker: S: cmd/123

== Request - Dispense operation from App ==
api -> app : GET /dispense?dispenserId=123
app <-> db : Read dispenser record
alt if balance >= $1.00 and no dispense requestId
    app -> db : PUT dispense "requestId": "1234-5678" to request
    app -> broker: P: cmd/123
    note right
        {
            "command": "dispense",
            "requestId": "1234-5678",
            "timestamp": 12345
        }
    end note
    app -> log_db : Dispense: Requested dispenser to activate
    app -> api : 200 - Dispense requested
else If no credits or request already recorded
    app -> log_db : Dispense: Error, no funds or dispense in operation
    app x-> api : 200 - Insufficient funds or dispense in operation
end
... Some period of time ...
== Response - Dispenser processes the message ==
hnote over dispenser : Dispense message received on topic cmd/123
broker -> dispenser : message (command, requestId, timestamp)
alt timestamp of message > 5 seconds (stale)
    dispenser -x dispenser : discard message
else timestamp < 5 seconds old (current)
    dispenser -> dispenser : Activate motor for nn milliseconds
    dispenser -> broker : P: cmd/123/<b>response</b>
    note left
        {
            "command": "dispense",
            "requestId": "1234-5678",
            "result": "success",
            "timestamp": 45678
        }
    end note
    broker -> rules: response message
    rules -> app : Invoke based on command == "dispense" -> message
    app <-> db : Read dispenser record
    alt requestId found in dispenser record
        app -> db : If requestId found, Deduct $1.00 from dispenser 123 credits, clear requestId, update dispenser record
        app -> log_db : Dispense: Operation completed successfully for dispenser
    else requestId was <i>NOT</i> found
        app -> log_db : Dispense: ERROR, no corresponding requestId found
    end
end
@enduml

PlantUML version 1.2019.06(Fri May 24 17:10:25 GMT 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+11-post-Ubuntu-1ubuntu218.04.3
Operating System: Linux
OS Version: 4.9.184-linuxkit
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>