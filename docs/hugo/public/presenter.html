<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.59.1" />
    <meta name="description" content="">


    <link rel="icon" href="./images/favicon.png" type="image/png">

    <title>Setting Up the Workshop :: Connected Drink Dispenser Workshop</title>

    
    <link href="./css/nucleus.css" rel="stylesheet">
    <link href="./css/fontawesome-all.min.css" rel="stylesheet">
    <link href="./css/hybrid.css" rel="stylesheet">
    <link href="./css/featherlight.min.css" rel="stylesheet">
    <link href="./css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="./css/auto-complete.css" rel="stylesheet">
    <link href="./css/atom-one-dark-reasonable.css" rel="stylesheet">
    <link href="./css/theme.css" rel="stylesheet">
    <link href="./css/hugo-theme.css" rel="stylesheet">
    
      <link href="./css/theme-mine.css" rel="stylesheet">
    

    <script src="./js/jquery-3.3.1.min.js"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <link rel="stylesheet" href="./css/adoc.css">
<link rel="stylesheet" href="./css/tags.css">
<link rel="stylesheet" href="./css/jquery-ui.min.css">
  </head>
  <body class="" data-url="/presenter.html">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://cdd.example.com/docs/docs">
    <img src="./images/cdd_logo.png" alt="Connected Drink Dispenser Workshop" width="50%">
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="./js/lunr.min.js"></script>
<script type="text/javascript" src="./js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/cdd.example.com\/docs";
    
</script>
<script type="text/javascript" src="./js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/participant.html" title="Workshop Participant" class="dd-item 
        
        
        
        ">
      <a href="./participant.html">
          <i class="fas fa-user-graduate"></i>&nbsp;Workshop Participant
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules.html" title="Lab Modules" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules.html">
          <i class="fas fa-user-graduate"></i>&nbsp;Lab Modules
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/1_overview.html" title="1. Architecture Overview" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules/1_overview.html">
          1. Architecture Overview
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/2_laptop_setup.html" title="2. Laptop Setup" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules/2_laptop_setup.html">
          2. Laptop Setup
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/3_create_account.html" title="3. Create Account/Resources" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules/3_create_account.html">
          3. Create Account/Resources
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/4_esp_setup.html" title="4. MCU Setup &amp; Test" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules/4_esp_setup.html">
          4. MCU Setup &amp; Test
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/5_cloud9_setup.html" title="5. Cloud9 Dev Environment" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules/5_cloud9_setup.html">
          5. Cloud9 Dev Environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/6_flash_and_test.html" title="6. Develop, Flash, &amp; Test MCU" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules/6_flash_and_test.html">
          6. Develop, Flash, &amp; Test MCU
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/7_investigate_cloud.html" title="7. Review Cloud Architecture" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules/7_investigate_cloud.html">
          7. Review Cloud Architecture
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/8_build_dispenser.html" title="8. Build Dispenser" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules/8_build_dispenser.html">
          8. Build Dispenser
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/participant/lab_modules/9_final_test.html" title="9. Dispense a Drink!" class="dd-item 
        
        
        
        ">
      <a href="./participant/lab_modules/9_final_test.html">
          9. Dispense a Drink!
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/presenter.html" title="Setting Up the Workshop" class="dd-item 
        parent
        active
        
        ">
      <a href="./presenter.html">
          <i class="fas fa-chalkboard-teacher"></i>&nbsp;Setting Up the Workshop
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/presenter/prerequisites.html" title="Prerequisites" class="dd-item 
        
        
        
        ">
      <a href="./presenter/prerequisites.html">
          <i class="fas fa-greater-than"></i>&nbsp;Prerequisites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/presenter/deploy.html" title="Deploy Stack" class="dd-item 
        
        
        
        ">
      <a href="./presenter/deploy.html">
          <i class="fas fa-greater-than"></i>&nbsp;Deploy Stack
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/presenter/repository.html" title="Repository Layout" class="dd-item 
        
        
        
        ">
      <a href="./presenter/repository.html">
          <i class="fas fa-greater-than"></i>&nbsp;Repository Layout
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/presenter/design_notes.html" title="Design Notes" class="dd-item 
        
        
        
        ">
      <a href="./presenter/design_notes.html">
          <i class="fas fa-greater-than"></i>&nbsp;Design Notes
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/presenter/design_notes/message_flows.html" title="Message Flows" class="dd-item 
        
        
        
        ">
      <a href="./presenter/design_notes/message_flows.html">
          <i class="fas fa-greater-than"></i>&nbsp;Message Flows
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/search?q=topic%3Aiot&#43;org%3Aaws-samples&#43;fork%3Atrue"><i class='fas fa-bookmark'></i> AWS Samples on GitHub</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='./'></a> > Setting Up the Workshop
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#welcome-presenter">Welcome Presenter!</a>
<ul>
<li><a href="#quick-start-using-cloud9">Quick-start Using Cloud9</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Setting Up the Workshop
            </h1>
          

        




	

<h2 id="welcome-presenter">Welcome Presenter!</h2>

<p>This section will walk you through setting up the <em>Connected Drink Dispenser</em> workshop for participants. It covers the workshop setup, how procure and build hardware, and the approach to introduce the workshop and mentor the participants attending the workshop.</p>


<div class="notices warning" ><p>Deploying the workshop opens your account to anyone registering for an account from the single-page app. Each participant (user) is provisioned with a Cloud9 instance that allows them to run processes and access the Internet. Only deploy the workshop over a period of time (hours, not days) where you can monitor activity in your account, and destroy the workshop once completed to secure resources.</p>
</div>


<p>Each section covers details for understanding, setting up, and presenting the workshop. Follow each of these sections in order to fully build the workshop.</p>

<ol>
<li>Prerequisites to host the workshop for one or multiple runs.</li>
<li>Building and deploying the workshop cloud assets.</li>
<li>Procuring drink dispenser hardware.</li>
<li>Presentation tips and FAQ for supporting participant.</li>
<li>Layout of the repository.</li>
</ol>

<h3 id="quick-start-using-cloud9">Quick-start Using Cloud9</h3>

<p>Follow these steps to deploy from a Cloud9 instance in the account where you wish to run the workshop:</p>

<ol>
<li>Ensure a Route 53 hosted public zone is <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/dns-configuring.html">setup</a> for a private domain name you have registered. The domain <code>example.com</code> is used below.</li>
<li>Launch a Cloud9 IDE from an account with all the IAM permissions needed to deploy the Cloud Development Kit (CDK) stack, <em>from the region where you want to deploy the workshop</em>. As there are a <em>lot</em> of IAM related permissions needed, the AWS managed permissions group, <em>AdministratorAccess</em>, has the necessary permissions.</li>

<li><p>Open a new terminal, install dependencies, clone this repository, and create the <code>connected-drink-dispenser-workshop/deploy/config.json</code> file from the template.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">### Copy and paste these lines into terminal</span>
cd ~/environment/
npm install -g cdk
npm install -g yarn
git clone https://github.com/aws-samples/connected-drink-dispenser-workshop.git
cd connected-drink-dispenser-workshop/deploy/
sudo pip-3.6 install -r requirements.txt
cp config.json.default config.json
<span style="color:#75715e">### end of copy/paste</span></code></pre></div></li>

<li><p>Update the <code>config.json</code> file&rsquo;s values and save the file when complete:</p>

<ul>
<li><strong>ProfileName</strong> - Change to <code>default</code> (this uses the permissions from our user account in Cloud9)</li>
<li><strong>AdminPassword</strong> - Enter the value for the dispenser app admin user, must include <em>lower case</em>, <em>upper case</em>, and a <em>number</em></li>
<li><strong>Region</strong> - Set to the region you want the workshop to be deployed (should be the same as where Cloud9 was launched)</li>
<li><strong>Hostname</strong> - Enter the fully qualified domain name to use for workshop for the Route 53 hosted zone (e.g., <code>cdd.example.com</code>)</li>
</ul></li>

<li><p>From the terminal, bootstrap the CDK into the region (optional if you are already using CDK in that region) with the command <code>cdk bootstrap</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cdk bootstrap
    Bootstrapping environment aws://ACCOUNT/REGION...
CDKToolkit: creating CloudFormation changeset...
<span style="color:#ae81ff">0</span>/2 | <span style="color:#ae81ff">3</span>:21:24 PM | CREATE_IN_PROGRESS   | AWS::S3::Bucket | StagingBucket 
<span style="color:#ae81ff">0</span>/2 | <span style="color:#ae81ff">3</span>:21:25 PM | CREATE_IN_PROGRESS   | AWS::S3::Bucket | StagingBucket Resource creation Initiated
<span style="color:#ae81ff">1</span>/2 | <span style="color:#ae81ff">3</span>:21:47 PM | CREATE_COMPLETE      | AWS::S3::Bucket | StagingBucket 
<span style="color:#ae81ff">2</span>/2 | <span style="color:#ae81ff">3</span>:21:49 PM | CREATE_COMPLETE      | AWS::CloudFormation::Stack | CDKToolkit 
    Environment aws://ACCOUNT/REGION bootstrapped.</code></pre></div></li>

<li><p>Deploy the workshop with the command <code>cdk deploy</code>. This will create a lot of updates as the stack progresses and will take 30-50 minutes to complete due to the CloudFront deployment:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cdk deploy
... LIST OF RESOURCES ...
Do you wish to deploy these changes <span style="color:#f92672">(</span>y/n<span style="color:#f92672">)</span>? y
cdd-workshop: deploying...
Updated: asset.d58800906a30c9e60c2dc7e40199f78f18842fa61a81094dd212ef1d9c4607a7 <span style="color:#f92672">(</span>zip<span style="color:#f92672">)</span>
... BUILD STEPS ...
cdd-workshop.StaticSiteDistributionId8C64EF2A <span style="color:#f92672">=</span> E5J4ADZ0ZK1C5
cdd-workshop.UserPoolCognitoClientId49B6D8C4 <span style="color:#f92672">=</span> 2b38h8da7dds832qvio3vkds5b
cdd-workshop.UserPoolCognitoUserPoolIdA08E3514 <span style="color:#f92672">=</span> us-west-2_bnzrtUys3

Stack ARN:
arn:aws:cloudformation:us-west-2:904880203774:stack/cdd-workshop/832c88d0-1b7c-11ea-b1f9-02b80ff4b548
$</code></pre></div>
<p>If you see errors or <em>CREATE_FAILED</em> messages, review the reasons, which most likely will be permissions related. At this point the CDK will attempt to rollback and delete the deployment of resources. You may need to go into CloudFormation and delete the stack manually or issue the command <code>cdk destroy</code>. To resolve permissions errors, add the needed permissions to your account, and then close the Cloud9 IDE web page and relaunch from the console to refresh permissions.</p>

<p>With expanded permissions, attempt again to deploy the stack until the success message above is seen.</p></li>

<li><p>Finally, issue the command <code>python deploy</code> to build the single page application, and upload all resources to the S3 origin bucket:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ python deploy.py
... BUILD AND UPLOAD STEPS
DONE  Build complete. The dist directory is ready to be deployed.
INFO  Check out deployment instructions at https://cli.vuejs.org/guide/deployment.html
                                    
Done in <span style="color:#ae81ff">65</span>.14s.
Copying Single page web application to S3: <span style="color:#ae81ff">36</span> files <span style="color:#f92672">[</span><span style="color:#ae81ff">00</span>:05,  <span style="color:#ae81ff">6</span>.22 files/s<span style="color:#f92672">]</span>                                              
Copying Credential C formatter page to S3: <span style="color:#ae81ff">6</span> files <span style="color:#f92672">[</span><span style="color:#ae81ff">00</span>:00, <span style="color:#ae81ff">79</span>.67 files/s<span style="color:#f92672">]</span>                                               
Copying Online documentation to S3: <span style="color:#ae81ff">446</span> files <span style="color:#f92672">[</span><span style="color:#ae81ff">00</span>:13, <span style="color:#ae81ff">33</span>.56 files/s<span style="color:#f92672">]</span></code></pre></div></li>
</ol>

<p>At this point, the stack if fully deployed and ready to start! Once the workshop is over, either delete via CloudFormation or from the same Cloud9 IDE, issue the command <code>cdk destroy</code> from the <code>deploy</code> directory.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="./participant/lab_modules/9_final_test.html" title="9. Dispense a Drink!"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="./presenter/prerequisites.html" title="Prerequisites" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="./js/clipboard.min.js"></script>
    <script src="./js/perfect-scrollbar.min.js"></script>
    <script src="./js/perfect-scrollbar.jquery.min.js"></script>
    <script src="./js/jquery.sticky.js"></script>
    <script src="./js/featherlight.min.js"></script>
    <script src="./js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="./js/modernizr.custom-3.6.0.js"></script>
    <script src="./js/learn.js"></script>
    <script src="./js/hugo-learn.js"></script>

    <link href="./mermaid/mermaid.css" rel="stylesheet" />
    <script src="./mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <div style="float: right;margin-right: 10px;margin-top: 10px;font-size: smaller;">Copyright © 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div>

<script src="./js/fix-adoc.js"></script>
<script src="./js/jquery-ui.min.js"></script>

  </body>
</html>
